(()=>{"use strict";class t{constructor(t,e,s,o,i){this.card=t,this._name=t.name,this._link=t.link,this._myid=t.myid,this._cardId=t._id,this._likes=t.likes,this._likesLength=t.likes.length,this._putLike=i,this._ownerId=t.owner._id,this._openConfirm=o,this._templateSelector=s,this.handleCardClick=e}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_visibleDeleteButton(){this._myid===this._ownerId?this._delete.style.visibility="visible":this._myid!==this._ownerId&&(this._delete.style.visibility="hidden")}_countLike(){this._likes.forEach((t=>{t._id!==this._myid?this._counter.textContent=this._likesLength:this._button.classList.add("element__like-button_active")}))}generateCard(){return this._element=this._getTemplate(),this._counter=this._element.querySelector(".element__like-count"),this._delete=this._element.querySelector(".element__delete"),this._button=this._element.querySelector(".element__like-button"),this._image=this._element.querySelector(".element__image"),this._text=this._element.querySelector(".element__title"),this._text.textContent=this._name,this._image.alt=this._name,this._image.src=this._link,this._countLike(),this._visibleDeleteButton(),this._setEventListeners(),this._element}_likeCard(){this._putLike(this._button,this._cardId)}toggleLike(t){this._button.classList.toggle("element__like-button_active"),this._counter.textContent=t.length}deleteButtonCard(){this._element.remove(),this._element=null}getId(){return this._cardId}openImg(){this.handleCardClick(this._name,this._link)}_handleOpenDelete(){this._openConfirm({card:this,cardID:this._cardID})}_setEventListeners(){this._button.addEventListener("click",(()=>{this._likeCard()})),this._image.addEventListener("click",(()=>{this.openImg()})),this._delete.addEventListener("click",(()=>{this._handleOpenDelete()}))}}class e{constructor(t){this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._popupCloseButton=this._popup.querySelector(".popup__close")}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popup.addEventListener("mousedown",(t=>{t.target===t.currentTarget&&this.close()})),this._popupCloseButton.addEventListener("click",(()=>{this.close()}))}}class s extends e{constructor(t,e){super(t),this.formSubmitAdd=e,this._form=this._popup.querySelector(".form"),this._input=this._popup.querySelectorAll(".form__item"),console.log(this._input),this._popupButton=this._popup.querySelector(".popup__saved-button"),this._popupButtonLoading=this._popupButton.textContent}close(){super.close(),this._form.reset()}_getInputValues(){return this.values={},this._input.forEach((t=>{this.values[t.name]=t.value})),this.values}setInputsValues(t){this._input.forEach((e=>{e.value=t[e.name]}))}_onSubmit=t=>{t.preventDefault(),this._popupButton.textContent=`${this._popupButton.textContent}...`,this.formSubmitAdd(this._getInputValues())};setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._onSubmit)}setButtonText(t){this._popupButton.textContent=this._popupButtonLoading}}const o={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".popup__saved-button",inactiveButtonClass:"popup__saved-button_disabled",inputErrorClass:"form__item-error",errorClass:"error_opened"};class i{constructor(t,e){this.formSelector=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=Array.from(this.formSelector.querySelectorAll(this._inputSelector)),this._submitButton=this.formSelector.querySelector(this._submitButtonSelector)}_enableButton(t){t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled")}disableButton(t){t.classList.add(this._inactiveButtonClass),t.setAttribute("disabled",!0)}_showInputError(t){const e=document.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=document.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_hasInvalidInput(t){return t.some((t=>!t.validity.valid))}_checkInputValidity(t){t.checkValidity()?this._hideInputError(t):this._showInputError(t)}setEventListeners(){this.disableButton(this._submitButton),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this.toggleButtonState(),this._checkInputValidity(t)}))}))}toggleButtonState(){this._hasInvalidInput(this._inputList)?this.disableButton(this._submitButton):this._enableButton(this._submitButton)}resetValidation(){this.toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}enableValidation(){this.setEventListeners()}}const n=document.querySelector(".popup_type_edit"),r=document.querySelector(".popup_type_add"),a=(document.querySelector(".popup_type_image"),document.querySelector(".popup_type_confirm"),document.querySelector(".popup_type_avatar")),l=document.querySelector(".profile"),u=l.querySelector(".profile__edit-button"),h=l.querySelector(".profile__add-button"),c=n.querySelector(".form"),_=r.querySelector(".form"),p=a.querySelector(".form"),d=new class{constructor(t){this._url=t.baseUrl,this._headers=t.headers,this._authorization=t.headers.authorization}_checkResponse(t){return t.ok?t.json():Promise.reject(`Что-то пошло не так: ${t.status}`)}getInfo(){return fetch(`${this._url}/users/me`,{headers:{authorization:this._authorization,"Content-Type":"application/json"}}).then(this._checkResponse)}getCard(){return fetch(`${this._url}/cards`,{headers:{authorization:this._authorization,"Content-Type":"application/json"}}).then(this._checkResponse)}setUserInfo(t){return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.firstname,about:t.description})}).then(this._checkResponse)}setUserAvatar(t){return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(this._checkResponse)}addCard(t){return fetch(`${this._url}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t.title,link:t.link})}).then(this._checkResponse)}addLike(t){return fetch(`${this._url}/cards/${t}/likes`,{method:"PUT",headers:{authorization:this._authorization}}).then(this._checkResponse)}deleteLike(t){return fetch(`${this._url}/cards/${t}/likes`,{method:"DELETE",headers:{authorization:this._authorization}}).then(this._checkResponse)}deleteCard(t){return fetch(`${this._url}/cards/${t}`,{method:"DELETE",headers:{authorization:this._authorization}}).then(this._checkResponse)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66",headers:{authorization:"26786be3-fed9-4d83-9ae2-1348eee1b7d5","Content-Type":"application/json"}}),m=new class extends e{constructor(t){super(t),this._image=this._popup.querySelector(".popup__image"),this._text=this._popup.querySelector(".popup__text")}open=(t,e)=>{this._text.textContent=t,this._image.alt=t,this._image.src=e,super.open()}}(".popup_type_image");m.setEventListeners();const f=new class{constructor(t){this._profileName=document.querySelector(t.nameSelector),this._profileText=document.querySelector(t.jobSelector),this._profileAvatar=document.querySelector(t.avatarSelector)}getUserInfo(){return{firstname:this._profileName.textContent,description:this._profileText.textContent}}serUserInfo({avatar:t,firstname:e,description:s}){this._profileAvatar.src=t,this._profileName.textContent=e,this._profileText.textContent=s}}({nameSelector:".profile__title",jobSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),v=new s(".popup_type_edit",(function(t){d.setUserInfo(t).then((t=>{const e={avatar:t.avatar,firstname:t.name,description:t.about};f.serUserInfo(e)})).catch((t=>console.error(`Ошибка при редактировании ${t}`))).finally((()=>v.setButtonText())),v.close()}));v.setEventListeners(),u.addEventListener("click",(function(){v.setInputsValues(f.getUserInfo()),console.log(f.getUserInfo()),v.open()}));const y=new s(".popup_type_add",(function(t){console.log("open"),_.reset(),E.resetValidation(),Promise.all([d.getInfo(),d.addCard(t)]).then((([t,e])=>{console.log(e),e.myid=t._id,L.addItem(C(e)),y.close()})).catch((t=>console.error(`Ошибка при создании карточки ${t}`))).finally((()=>y.setButtonText()))}));y.setEventListeners(),h.addEventListener("click",(function(){y.open()}));const S=new s(".popup_type_avatar",(function(t){d.setUserAvatar(t).then((t=>{console.log(t),f.serUserInfo({avatar:t.avatar})})).catch((t=>console.error(`Ошибка при редактировании аватара ${t}`))).finally((()=>S.setButtonText())),S.close(),console.log("Close")}));S.setEventListeners();const g=document.querySelector(".profile__avatar-button");console.log(g),g.addEventListener("click",(function(){S.open()})),document.querySelector(".popup__saved-button_confirms");const b=new class extends e{constructor(t,e){super(t),this.formSubmit=e,this.popupButton=this._popup.querySelector(".popup__saved-button"),this.popupButtonLoading=this.popupButton.textContent}_submit=t=>{t.preventDefault(),this.popupButton.textContent=`${this.popupButton.textContent}...`,this.formSubmit({card:this._element,cardID:this._cardID})};setEventListeners(){super.setEventListeners(),this.popupButton.addEventListener("click",this._submit)}setSubmitHanlder(t){this.formSubmit=t}setButtonText(){this.popupButton.textContent=this.popupButtonLoading}open=(t,e)=>{super.open(),this._element=t,this._cardID=e}}(".popup_type_confirm",(function({card:t,cardId:e}){console.log("x"),d.deleteCard(e).then((e=>{console.log(e),t.deleteButtonCard(),b.close()})).catch((t=>console.error(`Ошибка при удалении карточки ${t}`))).finally((()=>b.setButtonText()))}));function C(e){const s=new t(e,m.open,".elements-template",(()=>{const t=s.getId();console.log(t),console.log("x"),b.open(),b.setSubmitHanlder((()=>{d.deleteCard(t).then((()=>{s.deleteButtonCard(),b.close()}))}))}),((t,e)=>{t.classList.contains("element__like-button_active")?d.deleteLike(e).then((t=>{console.log(t),s.toggleLike(t.likes)})).catch((t=>console.error(`Ошибка при удалении лайка ${t}`))):d.addLike(e).then((t=>{console.log(t),s.toggleLike(t.likes)})).catch((t=>console.error(`Ошибка при поставк лайка ${t}`)))}));return s.generateCard()}b.setEventListeners(),b.setSubmitHanlder();const L=new class{constructor(t,e){this.renderer=t,this._container=document.querySelector(e)}addItem(t){this._container.prepend(t)}renderItems(t){t.forEach((t=>{this.renderer(t)}))}}((t=>{L.addItem(C(t))}),".elements__list-template"),k=new i(o,c),E=new i(o,_),B=new i(o,p);k.enableValidation(),E.enableValidation(),B.enableValidation(),Promise.all([d.getInfo(),d.getCard()]).then((([t,e])=>{console.log(e),e.forEach((e=>{e.myid=t._id})),console.log(t),f.serUserInfo({avatar:t.avatar,firstname:t.name,description:t.about}),L.renderItems(e.reverse())})).catch((t=>console.error(`Ошибка при начальных данный страницы ${t}`)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQVFKLFVBQVcvRSxFQUFTakYsS0FBTWtLLFlBQWFqRixFQUFTZ0YsUUFDaEc2QixFQUFpQm1CLFlBQVlwQixFQUFTdUIsVUFBVSxJQUduRDdCLE9BQU9DLEdBQVVqSCxRQUFRaUgsTUFBTyx3Q0FBdUNBLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCB0ZW1wbGF0ZVNlbGVjdG9yLCBvcGVuQ29uZmlybSwgcHV0TGlrZSkge1xyXG4gICAgICAgIHRoaXMuY2FyZCA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX215aWQgPSBkYXRhLm15aWQ7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWRcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fbGlrZXNMZW5ndGggPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLl9wdXRMaWtlID0gcHV0TGlrZTtcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICAgICAgdGhpcy5fb3BlbkNvbmZpcm0gPSBvcGVuQ29uZmlybVxyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG5cclxuICAgIH1cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICAvLyDQt9Cw0LHQuNGA0LDQtdC8INGA0LDQt9C80LXRgtC60YMg0LjQtyBIVE1MINC4INC60LvQvtC90LjRgNGD0LXQvCDRjdC70LXQvNC10L3RglxyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBfdmlzaWJsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5fbXlpZCA9PT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxldGUuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbXlpZCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxldGUuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2NvdW50TGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9saWtlcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5faWQgPT09IHRoaXMuX215aWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fY291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzTGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50JylcclxuICAgICAgICB0aGlzLl9kZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUnKVxyXG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtYnV0dG9uJylcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJylcclxuICAgICAgICB0aGlzLl90ZXh0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKVxyXG4gICAgICAgIHRoaXMuX3RleHQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9jb3VudExpa2UoKVxyXG4gICAgICAgIHRoaXMuX3Zpc2libGVEZWxldGVCdXR0b24oKVxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKClcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjyDQu9Cw0LnQutCwXHJcbiAgICBfbGlrZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fcHV0TGlrZSh0aGlzLl9idXR0b24sIHRoaXMuX2NhcmRJZClcclxuICAgICAgICAvLyB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlJylcclxuICAgIH07XHJcbiAgICB0b2dnbGVMaWtlKGxpa2VzKSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpXHJcbiAgICAgICAgdGhpcy5fY291bnRlci50ZXh0Q29udGVudCA9IGxpa2VzLmxlbmd0aFxyXG4gICAgfVxyXG4gICAgLy/QpNGD0L3QutGG0LjRjyDRg9C00LDQu9C10L3QuNGPXHJcbiAgICBkZWxldGVCdXR0b25DYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGxcclxuXHJcbiAgICB9XHJcbiAgICBnZXRJZCgpIHtcclxuICAgIHJldHVybiAgdGhpcy5fY2FyZElkIFxyXG4gICAgfVxyXG4gICAgb3BlbkltZygpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgfVxyXG4gICAgX2hhbmRsZU9wZW5EZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5fb3BlbkNvbmZpcm0oeyBjYXJkOiB0aGlzLCBjYXJkSUQ6IHRoaXMuX2NhcmRJRCB9KVxyXG5cclxuICAgIH1cclxuICAgIC8v0YHQu9GD0YjQsNGC0LXQu9C4XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy/RgdC70YPRiNCw0YLQtdC70Ywg0LvQsNC50LrQsFxyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUNhcmQoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy/RgdC70YPRiNCw0YLQtdC70Ywg0YPQtNCw0LvRj9C70LrQuFxyXG4gICAgICAgIC8vIHRoaXMuX2RlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAvLyAgICAgdGhpcy5fZGVsZXRlQnV0dG9uQ2FyZCgpXHJcbiAgICAgICAgLy8gfSlcclxuICAgICAgICAvL9GB0LvRg9GI0LDRgtC10LvRjCDQvtGC0LrRgNGL0YLQuNGPINC60LDRgNGC0LjQvdC60LhcclxuICAgICAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuSW1nKClcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyAvL9GB0LvRg9GI0LDRgtC10LvRjCBcclxuICAgICAgICB0aGlzLl9kZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZU9wZW5EZWxldGUoKVxyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIC8vdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBDbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKTtcclxuICAgIH1cclxuXHJcbiAgICAvL9Ce0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQvy8vXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIilcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuXHJcbiAgICB9XHJcbiAgICAvL9CX0LDQutGA0YvRgtC40LUg0L/QvtC/0LDQvy8vXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpXHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgICB9XHJcbiAgICAvL9CX0LDQutGA0YvRgtC40LUg0L/QvtC/0LDQvyBFc2MvL1xyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8v0KHQu9GD0YjQsNGC0LXQu9GMINC30LDQutGA0YvRgtC40Y8sINC90LDQttC40LzQsNGPINC90LAg0YLQtdC80L0u0Y3QutGA0LDQvSDQuCDQt9Cw0LrRgNGL0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINC60YDQtdGB0YLQuNC6Ly9cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0QWRkKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5mb3JtU3VibWl0QWRkID0gZm9ybVN1Ym1pdEFkZDtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgICAgICB0aGlzLl9pbnB1dCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pdGVtJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5faW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlZC1idXR0b24nKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEJ1dHRvbkxvYWRpbmcgPSB0aGlzLl9wb3B1cEJ1dHRvbi50ZXh0Q29udGVudDtcclxuXHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpXHJcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIHRoaXMudmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXQuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlcztcclxuICAgIH1cclxuICAgIHNldElucHV0c1ZhbHVlcyhkYXRhVXNlcikge1xyXG4gICAgICAgIHRoaXMuX2lucHV0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVVzZXJbaW5wdXQubmFtZV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uU3VibWl0ID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gYCR7dGhpcy5fcG9wdXBCdXR0b24udGV4dENvbnRlbnR9Li4uYDtcclxuICAgICAgICB0aGlzLmZvcm1TdWJtaXRBZGQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX29uU3VibWl0KVxyXG4gICAgfVxyXG5cclxuICAgIHNldEJ1dHRvblRleHQodGV4dCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fcG9wdXBCdXR0b25Mb2FkaW5nXHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSAoe1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pdGVtJyxcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlZC1idXR0b24nLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlZC1idXR0b25fZGlzYWJsZWQnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faXRlbS1lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAnZXJyb3Jfb3BlbmVkJ1xyXG59KTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xyXG4gICAgICAgIHRoaXMuZm9ybVNlbGVjdG9yID0gZm9ybSxcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yLFxyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcixcclxuICAgICAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzLFxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzLFxyXG4gICAgICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3MsXHJcblxyXG4gICAgICAgICAgICAvL3RoaXMuX2Zvcm0gPSBBcnJheS5mcm9tKHRoaXMuZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5fZm9ybSlcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLmZvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKVxyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpXHJcbiAgICB9XHJcblxyXG4gICAgLy8g0LrQvdC+0L/QutCwINCw0LrRgtC40LJcclxuICAgIF9lbmFibGVCdXR0b24oYnV0dG9uKSB7XHJcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcylcclxuICAgICAgICBidXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIilcclxuICAgIH1cclxuICAgIC8vINC60L3QvtC/0LrQsCDQvdC10LDQutGC0LjQslxyXG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b24pIHtcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKVxyXG4gICAgfVxyXG5cclxuICAgIC8vINCk0YPQvdC60YbQuNGPICDQv9C+0LvRjyBjINC+0YjQuNCx0LrQvtC5XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBmb3JtRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2VcclxuICAgICAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gIC8vINCk0YPQvdC60YbQuNGPICDQv9C+0LvRjyDQsdC10Lcg0L7RiNC40LHQutC4XHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBmb3JtRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gXCJcIlxyXG4gICAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGFzSW52YWxpZElucHV0KGZvcm1JbnB1dCkge1xyXG4gICAgICAgIHJldHVybiBmb3JtSW5wdXQuc29tZShpdGVtID0+ICFpdGVtLnZhbGlkaXR5LnZhbGlkKVxyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgICAgICBpZiAoaW5wdXQuY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIC8v0YTRg9C90LrRhtC40Y8g0YHQu9GD0YjQsNGC0LXQu9C10LlcclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24pXHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gICAgIHRoaXMuX2Rpc2FibGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gICAgIHRoaXMuX2VuYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9O1xyXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGUoKXtcclxuICAgIFxyXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICh0aGlzLl9lbmFibGVCdXR0b24oKHRoaXMuX3N1Ym1pdEJ1dHRvbikpKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTsgXHJcbiAgXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxyXG4gICAgICAgIH0pO1xyXG4gIFxyXG4gICAgICB9XHJcbiAgICAvLyAgIC8v0YTRg9C90LrRhtC40Y8g0LfQsNC/0YPRgdC60LAg0LLRi9C70LjQtNCw0YbQuNC4XHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICAgIHRpdGxlOiAn0KHQsNGF0LDQu9C40L0nLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL2xpdmUuc3RhdGljZmxpY2tyLmNvbS82NTUzNS81MTY2NDMxMzcwNV81NzEzNzkxMjU3X2suanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aXRsZTogJ9CU0LDQs9C10YHRgtCw0L0nLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL2xpdmUuc3RhdGljZmxpY2tyLmNvbS8xOTU4LzQ0MzY4OTc4MzA0XzI3MzJiNTgzMjVfay5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHRpdGxlOiAn0JjQstCw0L3QvtCy0L4nLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHRpdGxlOiAn0JrQsNC80YfQsNGC0LrQsCcsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzY1NTM1LzQ4ODIwMTAwNTMyXzg3YTFjZWIxMGRfay5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHRpdGxlOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQkdCw0LnQutCw0LsnLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL2xpdmUuc3RhdGljZmxpY2tyLmNvbS82NTUzNS81MTQyMTIwNTQzNF84OTEzZjRhMWE1X2suanBnJ1xyXG4gICAgfVxyXG5dO1xyXG5cclxuLy8g0J3QsNGF0L7QtNC40LwgcG9wdXBcclxuY29uc3QgcG9wdXBFZGl0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0XCIpO1xyXG5jb25zdCBwb3B1cEFkZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkXCIpO1xyXG5jb25zdCBwb3B1cE9wZW5JbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbmNvbnN0IHBvcHVwQ2xvc2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfY29uZmlybScpXHJcbmNvbnN0IHBvcHVwQXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2F2YXRhcicpXHJcblxyXG4vLyDQndCw0YXQvtC00LjQvCDQutC90L7Qv9C60LhcclxuY29uc3QgcHJvZmlsZUJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudCA9IHByb2ZpbGVCdXR0b25FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVBZGRCdXR0b25FbGVtZW50ID0gcHJvZmlsZUJ1dHRvbkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuXHJcblxyXG4vLyDQndCw0YXQvtC00LjQvCDQv9C+0LvRjyDRhNC+0YDQvNGLINCyIERPTVxyXG5jb25zdCBmb3JtRWxlbWVudEVkaXQgPSBwb3B1cEVkaXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuY29uc3QgZm9ybUVsZW1lbnRBZGQgPSBwb3B1cEFkZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5jb25zdCBmb3JtRWxlbWVudEF2YXRhciA9IHBvcHVwQXZhdGFyRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcblxyXG5leHBvcnQgeyBwb3B1cEVkaXRFbGVtZW50LCBwb3B1cEFkZEVsZW1lbnQsIHBvcHVwT3BlbkltYWdlRWxlbWVudCwgcG9wdXBDbG9zZUVsZW1lbnQsIHBvcHVwQXZhdGFyRWxlbWVudCwgcHJvZmlsZUJ1dHRvbkVsZW1lbnQsIHByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudCwgcHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnQsIGZvcm1FbGVtZW50RWRpdCwgZm9ybUVsZW1lbnRBZGQsIGZvcm1FbGVtZW50QXZhdGFyIH0iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCJcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJ1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJ1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcydcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcydcclxuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qcydcclxuXHJcbmltcG9ydCB7IHZhbGlkYXRpb25Db25maWcgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXHJcbi8vaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG4vL2luaXRpYWxDYXJkcy5yZXZlcnNlKCk7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnXHJcblxyXG5pbXBvcnQgeyBwb3B1cEVkaXRFbGVtZW50LCBwb3B1cEFkZEVsZW1lbnQsIHBvcHVwT3BlbkltYWdlRWxlbWVudCwgcG9wdXBDbG9zZUVsZW1lbnQsIHBvcHVwQXZhdGFyRWxlbWVudCwgcHJvZmlsZUJ1dHRvbkVsZW1lbnQsIHByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudCwgcHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnQsIGZvcm1FbGVtZW50RWRpdCwgZm9ybUVsZW1lbnRBZGQsIGZvcm1FbGVtZW50QXZhdGFyIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL9Cf0L7QtNC60Y7Rhy4g0Log0YHQtdGA0LLQtdGA0YMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjYnLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246ICcyNjc4NmJlMy1mZWQ5LTRkODMtOWFlMi0xMzQ4ZWVlMWI3ZDUnLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxufSk7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/Qn9C+0L/QsNC/INC+0YLQutGA0YvRgtC40Y8g0LrQsNGA0YLQvtGH0LXQui8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmNvbnN0IHBvcHVwT3BlbkltYWdlRWxlbWVudFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9pbWFnZVwiXHJcblxyXG5jb25zdCBwb3B1cE9wZW5JbWFnZVNlY3Rpb24gPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBPcGVuSW1hZ2VFbGVtZW50U2VsZWN0b3IpXHJcbnBvcHVwT3BlbkltYWdlU2VjdGlvbi5zZXRFdmVudExpc3RlbmVycygpXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy/Qn9C+0L/QsNC/IEVESVRcclxuY29uc3QgY29uZmlnID0ge1xyXG4gICAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJyxcclxuICAgIGpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX3N1YnRpdGxlJyxcclxuICAgIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcclxufVxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhjb25maWcpO1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v0J/QvtC/0LDQvyBFRElULy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCBwb3B1cEVkaXRFbGVtZW50U2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2VkaXRcIlxyXG5jb25zdCBlZGl0UG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdEVsZW1lbnRTZWxlY3RvciwgZm9ybVN1Ym1pdEVkaXQpXHJcblxyXG5mdW5jdGlvbiBmb3JtU3VibWl0RWRpdChkYXRhKSB7XHJcbiAgICBhcGkuc2V0VXNlckluZm8oZGF0YSlcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VySW5mb0FsbCA9IHsgYXZhdGFyOiByZXMuYXZhdGFyLCBmaXJzdG5hbWU6IHJlcy5uYW1lLCBkZXNjcmlwdGlvbjogcmVzLmFib3V0IH1cclxuICAgICAgICAgICAgdXNlckluZm8uc2VyVXNlckluZm8odXNlckluZm9BbGwpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQuCAke2Vycm9yfWApKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiBlZGl0UG9wdXBXaXRoRm9ybS5zZXRCdXR0b25UZXh0KCkpXHJcblxyXG4gICAgZWRpdFBvcHVwV2l0aEZvcm0uY2xvc2UoKVxyXG59XHJcbmVkaXRQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKClcclxuLy8v0JjQutC+0L3QutCwIEVESVQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudEZ1bmN0aW9uKTtcclxuZnVuY3Rpb24gcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbiAgICBlZGl0UG9wdXBXaXRoRm9ybS5zZXRJbnB1dHNWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSlcclxuICAgIGNvbnNvbGUubG9nKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gICAgZWRpdFBvcHVwV2l0aEZvcm0ub3BlbigpXHJcbn1cclxuLy8gZnVuY3Rpb24gcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbi8vICAgICBlZGl0UG9wdXBXaXRoRm9ybS5vcGVuKClcclxuLy8gICAgIGNvbnN0IHByb2ZpbGVEYXRhICA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkgLy8g0JLQvtGCINGC0YPRgiDQsiDQv9C10YDQtdC80LXQvdC90YPRjiBwcm9maWxlRGF0YSDQv9C+0LvQvtC20LjQu9C4INC+0LHRitC10LrRgiwg0YLQvtGCINGH0YLQviDRgtGLINC60L7QvdGB0L7Qu9GM0LvQvtCz0LjRgNGD0LXRiNGMINC90LAg0YHQutGA0LjQvdGI0L7RgtC1IFxyXG4vLyAgIGNvbnNvbGUubG9nKHByb2ZpbGVEYXRhKTtcclxuLy8gICAgIG5hbWVFZGl0SW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5maXJzdG5hbWVcclxuLy8gICAgIGpvYkVkaXRJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLmRlc2NyaXB0aW9uXHJcbi8vICAgfVxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v0J/QvtC/0LDQvyBBRC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuY29uc3QgcG9wdXBBZGRFbGVtZW50U2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2FkZFwiXHJcbmNvbnN0IGFkZHRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRFbGVtZW50U2VsZWN0b3IsIGZvcm1TdWJtaXRBZGQpXHJcblxyXG5mdW5jdGlvbiBmb3JtU3VibWl0QWRkKGRhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKCdvcGVuJyk7XHJcbiAgICBmb3JtRWxlbWVudEFkZC5yZXNldCgpO1xyXG4gICAgZm9ybUFkZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKVxyXG4gICAgUHJvbWlzZS5hbGwoW2FwaS5nZXRJbmZvKCksIGFwaS5hZGRDYXJkKGRhdGEpXSlcclxuICAgICAgICAudGhlbigoW2RhdGFVc2VyLCBkYXRhQ2FyZF0pID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YUNhcmQpO1xyXG4gICAgICAgICAgICBkYXRhQ2FyZC5teWlkID0gZGF0YVVzZXIuX2lkXHJcbiAgICAgICAgICAgIGNhcmRzTGlzdFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGRhdGFDYXJkKSk7XHJcbiAgICAgICAgICAgIGFkZHRQb3B1cFdpdGhGb3JtLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YHQvtC30LTQsNC90LjQuCDQutCw0YDRgtC+0YfQutC4ICR7ZXJyb3J9YCkpKVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IGFkZHRQb3B1cFdpdGhGb3JtLnNldEJ1dHRvblRleHQoKSlcclxufTtcclxuYWRkdFBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuXHJcbi8vL9CY0LrQvtC90LrQsCBBREQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnByb2ZpbGVBZGRCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnRGdW5jdGlvbik7XHJcbmZ1bmN0aW9uIHByb2ZpbGVBZGRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbiAgICBhZGR0UG9wdXBXaXRoRm9ybS5vcGVuKClcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/Qn9C+0L/QsNC/IEFWQVRBUi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCBwb3B1cEF2YXRhckVsZW1lbnRTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfYXZhdGFyXCJcclxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEF2YXRhckVsZW1lbnRTZWxlY3RvciwgZm9ybVN1Ym1pdEF2YXRhcilcclxuXHJcbmZ1bmN0aW9uIGZvcm1TdWJtaXRBdmF0YXIoZGF0YSkge1xyXG4gICAgYXBpLnNldFVzZXJBdmF0YXIoZGF0YSlcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICB1c2VySW5mby5zZXJVc2VySW5mbyh7IGF2YXRhcjogcmVzLmF2YXRhciB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvciA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Lgg0LDQstCw0YLQsNGA0LAgJHtlcnJvcn1gKSkpXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gYXZhdGFyUG9wdXAuc2V0QnV0dG9uVGV4dCgpKVxyXG5cclxuICAgIGF2YXRhclBvcHVwLmNsb3NlKClcclxuICAgIGNvbnNvbGUubG9nKCdDbG9zZScpO1xyXG59O1xyXG5hdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpXHJcbmNvbnNvbGUubG9nKGF2YXRhckJ1dHRvbik7XHJcbi8vL9CY0LrQvtC90LrQsCBDTE9TRS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZm9ybSlcclxuZnVuY3Rpb24gZm9ybSgpIHtcclxuICAgIGF2YXRhclBvcHVwLm9wZW4oKVxyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v0J/QvtC/0LDQvyBDT05GSVJNLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmNvbnN0IHBvcHVwQ29uZmlybUVsZW1lbnRTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfY29uZmlybVwiXHJcbmNvbnN0IEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZWQtYnV0dG9uX2NvbmZpcm1zJylcclxuY29uc3QgZGVmYXVsdEIgPSAn0JTQsC4uLidcclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoRGVsZXRlKHBvcHVwQ29uZmlybUVsZW1lbnRTZWxlY3RvciwgZm9ybVN1Ym1pdENvbmZpcm0pXHJcbmZ1bmN0aW9uIGZvcm1TdWJtaXRDb25maXJtKHsgY2FyZCwgY2FyZElkIH0pIHtcclxuICAgIGNvbnNvbGUubG9nKCd4Jyk7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgY2FyZC5kZWxldGVCdXR0b25DYXJkKClcclxuICAgICAgICAgICAgcG9wdXBEZWxldGUuY2xvc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvciA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INGD0LTQsNC70LXQvdC40Lgg0LrQsNGA0YLQvtGH0LrQuCAke2Vycm9yfWApKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiBwb3B1cERlbGV0ZS5zZXRCdXR0b25UZXh0KCkpXHJcblxyXG59XHJcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKClcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL9GA0LXQsNC70LjQt9Cw0YbQuNGPINC60LvQsNGB0YHQsCBTZWN0aW9uLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gICAgY29uc3QgY2FyZHMgPSBuZXcgQ2FyZChpdGVtLCBwb3B1cE9wZW5JbWFnZVNlY3Rpb25cclxuICAgICAgICAub3BlbiwgJy5lbGVtZW50cy10ZW1wbGF0ZScsXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IGNhcmRzLmdldElkKClcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaWQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygneCcpO1xyXG4gICAgICAgICAgICBwb3B1cERlbGV0ZS5vcGVuKCksXHJcbiAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZS5zZXRTdWJtaXRIYW5sZGVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChpZCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRzLmRlbGV0ZUJ1dHRvbkNhcmQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKGxpa2VFbGVtZW50LCBjYXJkSWQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGxpa2VFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmRJZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkcy50b2dnbGVMaWtlKHJlcy5saWtlcylcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IgPT4gY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINC/0YDQuCDRg9C00LDQu9C10L3QuNC4INC70LDQudC60LAgJHtlcnJvcn1gKSkpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcGkuYWRkTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZHMudG9nZ2xlTGlrZShyZXMubGlrZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0L/QvtGB0YLQsNCy0Log0LvQsNC50LrQsCAke2Vycm9yfWApKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkcy5nZW5lcmF0ZUNhcmQoKVxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcbnBvcHVwRGVsZXRlLnNldFN1Ym1pdEhhbmxkZXIoKVxyXG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gJy5lbGVtZW50c19fbGlzdC10ZW1wbGF0ZSc7XHJcbmNvbnN0IGNhcmRzTGlzdFNlY3Rpb24gPSBuZXcgU2VjdGlvbigoaXRlbSkgPT4ge1xyXG4gICAgY2FyZHNMaXN0U2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xyXG59LFxyXG4gICAgY2FyZExpc3RTZWxlY3RvclxyXG4pO1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/QktCQ0JvQmNCU0JDQptCY0K8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuY29uc3QgZm9ybUVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudEVkaXQpXHJcbmNvbnN0IGZvcm1BZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudEFkZClcclxuY29uc3QgZm9ybUF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50QXZhdGFyKVxyXG5cclxuLy8gIC8vXCLQktC60LvRjtGH0LDQtdC8XCIg0L/QvtC00L/QuNGB0LrQuCDQvdCwINC40LfQvNC10L3QtdC90LjRjyDQsiDQuNC90L/Rg9GC0LDRhVxyXG5mb3JtRWRpdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcclxuZm9ybUFkZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcclxuZm9ybUF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL9Ce0YHQvdC+0LLQsCBBUEkvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5mbygpLCBhcGkuZ2V0Q2FyZCgpXSlcclxuICAgIC50aGVuKChbZGF0YVVzZXIsIGRhdGFDYXJkXSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGFDYXJkKTtcclxuICAgICAgICBkYXRhQ2FyZC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm15aWQgPSBkYXRhVXNlci5faWRcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhVXNlcik7XHJcbiAgICAgICAgdXNlckluZm8uc2VyVXNlckluZm8oeyBhdmF0YXI6IGRhdGFVc2VyLmF2YXRhciwgZmlyc3RuYW1lOiBkYXRhVXNlci5uYW1lLCBkZXNjcmlwdGlvbjogZGF0YVVzZXIuYWJvdXQgfSlcclxuICAgICAgICBjYXJkc0xpc3RTZWN0aW9uLnJlbmRlckl0ZW1zKGRhdGFDYXJkLnJldmVyc2UoKSlcclxuXHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINC/0YDQuCDQvdCw0YfQsNC70YzQvdGL0YUg0LTQsNC90L3Ri9C5INGB0YLRgNCw0L3QuNGG0YsgJHtlcnJvcn1gKSlcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fdXJsID0gb3B0aW9ucy5iYXNlVXJsXHJcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzXHJcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb25cclxuICB9XHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQp9GC0L4t0YLQviDQv9C+0YjQu9C+INC90LUg0YLQsNC6OiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9XHJcbiAgZ2V0Q2FyZCgpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLmZpcnN0bmFtZSxcclxuICAgICAgICBhYm91dDogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfVxyXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfVxyXG4gIGFkZENhcmQoZGF0YSl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLnRpdGxlLFxyXG4gICAgICAgIGxpbms6IGRhdGEubGluayxcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH1cclxuICBhZGRMaWtlKGNhcmRJZCl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfVxyXG4gIGRlbGV0ZUxpa2UoY2FyZElkKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9XHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG5cclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl90ZXh0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fdGV4dFwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4gPSAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgdGhpcy5fdGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lXHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgc3VwZXIub3BlbigpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcubmFtZVNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2ZpbGVUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuam9iU2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmF2YXRhclNlbGVjdG9yKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVUZXh0LnRleHRDb250ZW50XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHNlclVzZXJJbmZvKHthdmF0YXIsIGZpcnN0bmFtZSwgZGVzY3JpcHRpb259KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhclxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBmaXJzdG5hbWVcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2ZpbGVUZXh0LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXQpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLmZvcm1TdWJtaXQgPSBmb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMucG9wdXBCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMucG9wdXBCdXR0b25Mb2FkaW5nID0gdGhpcy5wb3B1cEJ1dHRvbi50ZXh0Q29udGVudDtcclxuXHJcbiAgICB9XHJcbiAgICBfc3VibWl0ID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICB0aGlzLnBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gYCR7dGhpcy5wb3B1cEJ1dHRvbi50ZXh0Q29udGVudH0uLi5gO1xyXG4gICAgICAgIHRoaXMuZm9ybVN1Ym1pdCgoeyBjYXJkOiB0aGlzLl9lbGVtZW50LCBjYXJkSUQ6IHRoaXMuX2NhcmRJRCB9KSk7XHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgdGhpcy5wb3B1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX3N1Ym1pdClcclxuICAgIH1cclxuICAgIFxyXG4gICAgc2V0U3VibWl0SGFubGRlciAobmV3Rm9ybVN1Ym1pdCApe1xyXG4gICAgICAgIHRoaXMuZm9ybVN1Ym1pdCA9IG5ld0Zvcm1TdWJtaXRcclxuICAgIH1cclxuICAgIFxyXG4gICAgc2V0QnV0dG9uVGV4dCggKSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMucG9wdXBCdXR0b25Mb2FkaW5nXHJcbiAgICB9XHJcblxyXG4gICAgb3BlbiA9IChjYXJkLCBjYXJkSWQgKSA9PiB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGNhcmQ7XHJcbiAgICAgICAgdGhpcy5fY2FyZElEID0gY2FyZElkO1xyXG4gICAgfVxyXG59IiwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTsgXHJcbiAgICB9XHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXHJcbiAgICB9XHJcbiAgICByZW5kZXJJdGVtcyhkYXRhKSB7XHJcbiAgICAvL3JlbmRlcmVyKCkge1xyXG4gICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcihpdGVtKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwidGVtcGxhdGVTZWxlY3RvciIsIm9wZW5Db25maXJtIiwicHV0TGlrZSIsInRoaXMiLCJjYXJkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX215aWQiLCJteWlkIiwiX2NhcmRJZCIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX2xpa2VzTGVuZ3RoIiwibGVuZ3RoIiwiX3B1dExpa2UiLCJfb3duZXJJZCIsIm93bmVyIiwiX29wZW5Db25maXJtIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3Zpc2libGVEZWxldGVCdXR0b24iLCJfZGVsZXRlIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiX2NvdW50TGlrZSIsImZvckVhY2giLCJlbGVtZW50IiwiX2NvdW50ZXIiLCJ0ZXh0Q29udGVudCIsIl9idXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJnZW5lcmF0ZUNhcmQiLCJfZWxlbWVudCIsIl9pbWFnZSIsIl90ZXh0IiwiYWx0Iiwic3JjIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VDYXJkIiwidG9nZ2xlTGlrZSIsInRvZ2dsZSIsImRlbGV0ZUJ1dHRvbkNhcmQiLCJyZW1vdmUiLCJnZXRJZCIsIm9wZW5JbWciLCJfaGFuZGxlT3BlbkRlbGV0ZSIsImNhcmRJRCIsIl9jYXJkSUQiLCJhZGRFdmVudExpc3RlbmVyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9wb3B1cENsb3NlQnV0dG9uIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0QWRkIiwic3VwZXIiLCJfZm9ybSIsIl9pbnB1dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb25zb2xlIiwibG9nIiwiX3BvcHVwQnV0dG9uIiwiX3BvcHVwQnV0dG9uTG9hZGluZyIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwidmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0c1ZhbHVlcyIsImRhdGFVc2VyIiwiX29uU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJzZXRCdXR0b25UZXh0IiwidGV4dCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJfc3VibWl0QnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsImJ1dHRvbiIsInJlbW92ZUF0dHJpYnV0ZSIsImRpc2FibGVCdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJfc2hvd0lucHV0RXJyb3IiLCJmb3JtRXJyb3IiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImZvcm1JbnB1dCIsInNvbWUiLCJpdGVtIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJjaGVja1ZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJyZXNldFZhbGlkYXRpb24iLCJpbnB1dEVsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXBFZGl0RWxlbWVudCIsInBvcHVwQWRkRWxlbWVudCIsInBvcHVwQXZhdGFyRWxlbWVudCIsInByb2ZpbGVCdXR0b25FbGVtZW50IiwicHJvZmlsZUVkaXRCdXR0b25FbGVtZW50IiwicHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnQiLCJmb3JtRWxlbWVudEVkaXQiLCJmb3JtRWxlbWVudEFkZCIsImZvcm1FbGVtZW50QXZhdGFyIiwiYXBpIiwib3B0aW9ucyIsIl91cmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2F1dGhvcml6YXRpb24iLCJhdXRob3JpemF0aW9uIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5mbyIsImZldGNoIiwidGhlbiIsImdldENhcmQiLCJzZXRVc2VySW5mbyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RuYW1lIiwiYWJvdXQiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJhZGRDYXJkIiwidGl0bGUiLCJhZGRMaWtlIiwiY2FyZElkIiwiZGVsZXRlTGlrZSIsImRlbGV0ZUNhcmQiLCJwb3B1cE9wZW5JbWFnZVNlY3Rpb24iLCJ1c2VySW5mbyIsIl9wcm9maWxlTmFtZSIsIm5hbWVTZWxlY3RvciIsIl9wcm9maWxlVGV4dCIsImpvYlNlbGVjdG9yIiwiX3Byb2ZpbGVBdmF0YXIiLCJhdmF0YXJTZWxlY3RvciIsImdldFVzZXJJbmZvIiwic2VyVXNlckluZm8iLCJlZGl0UG9wdXBXaXRoRm9ybSIsInVzZXJJbmZvQWxsIiwiY2F0Y2giLCJlcnJvciIsImZpbmFsbHkiLCJhZGR0UG9wdXBXaXRoRm9ybSIsImZvcm1BZGRWYWxpZGF0b3IiLCJhbGwiLCJkYXRhQ2FyZCIsImNhcmRzTGlzdFNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsImF2YXRhclBvcHVwIiwiYXZhdGFyQnV0dG9uIiwicG9wdXBEZWxldGUiLCJmb3JtU3VibWl0IiwicG9wdXBCdXR0b24iLCJwb3B1cEJ1dHRvbkxvYWRpbmciLCJfc3VibWl0Iiwic2V0U3VibWl0SGFubGRlciIsIm5ld0Zvcm1TdWJtaXQiLCJjYXJkcyIsImxpa2VFbGVtZW50IiwiY29udGFpbnMiLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImZvcm1FZGl0VmFsaWRhdG9yIiwiZm9ybUF2YXRhclZhbGlkYXRvciIsInJldmVyc2UiXSwic291cmNlUm9vdCI6IiJ9