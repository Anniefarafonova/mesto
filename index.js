(()=>{"use strict";class e{constructor(e,t,s,i){this._name=e,this._link=t,this._templateSelector=i,this.handleCardClick=s}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._element.querySelector(".element__title").textContent=this._name,this._image=this._element.querySelector(".element__image"),this._image.alt=this._name,this._image.src=this._link,this._detete=this._element.querySelector(".element__delete"),this._button=this._element.querySelector(".element__like-button"),this._setEventListeners(),this._element}_likeCard(){this._button.classList.toggle("element__like-button_active")}_deleteCard(){this._element.remove(),this._element=null}openImg(){this.handleCardClick(this._name,this._link)}_setEventListeners(){this._button.addEventListener("click",(()=>{this._likeCard()})),this._detete.addEventListener("click",(()=>{this._deleteCard()})),this._image.addEventListener("click",(()=>{this.openImg()}))}}class t{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._popupCloseButton=this._popup.querySelector(".popup__close")}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()})),this._popupCloseButton.addEventListener("click",(()=>{this.close()}))}}class s extends t{constructor(e,t){super(e),this.formSubmitAdd=t,this._form=this._popup.querySelector(".form"),this._input=this._popup.querySelectorAll(".form__item"),this._formButton=this._popup.querySelectorAll(".popup__saved-button")}close(){super.close(),this._form.reset()}_getInputValues(){return this.values={},this._input.forEach((e=>{this.values[e.name]=e.value})),this.values}setInputsValues(e){this._input.forEach((t=>{t.value=e[t.name]}))}_onSubmit=e=>{e.preventDefault(),this.formSubmitAdd(this._getInputValues())};setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._onSubmit)}}const i={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".popup__saved-button",inactiveButtonClass:"popup__saved-button_disabled",inputErrorClass:"form__item-error",errorClass:"error_opened"};class r{constructor(e,t){this.formSelector=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=Array.from(this.formSelector.querySelectorAll(this._inputSelector)),this._submitButton=this.formSelector.querySelector(this._submitButtonSelector)}_enableButton(e){e.classList.remove(this._inactiveButtonClass),e.removeAttribute("disabled")}disableButton(e){e.classList.add(this._inactiveButtonClass),e.setAttribute("disabled",!0)}_showInputError(e){const t=document.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=document.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_checkInputValidity(e){e.checkValidity()?this._hideInputError(e):this._showInputError(e)}setEventListeners(){this.disableButton(this._submitButton),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this.toggleButtonState(),this._checkInputValidity(e)}))}))}toggleButtonState(){this._hasInvalidInput(this._inputList)?this.disableButton(this._submitButton):this._enableButton(this._submitButton)}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this.setEventListeners()}}const o=[{title:"Сахалин",link:"https://live.staticflickr.com/65535/51664313705_5713791257_k.jpg"},{title:"Дагестан",link:"https://live.staticflickr.com/1958/44368978304_2732b58325_k.jpg"},{title:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{title:"Камчатка",link:"https://live.staticflickr.com/65535/48820100532_87a1ceb10d_k.jpg"},{title:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{title:"Байкал",link:"https://live.staticflickr.com/65535/51421205434_8913f4a1a5_k.jpg"}];o.reverse();const n=document.querySelector(".popup_type_edit"),l=document.querySelector(".popup_type_add"),u=document.querySelector(".popup_type_image"),_=(u.querySelector(".popup__text"),u.querySelector(".popup__image"),document.querySelector(".profile")),c=_.querySelector(".profile__edit-button"),a=_.querySelector(".profile__add-button"),p=n.querySelector(".form"),h=l.querySelector(".form"),d=(p.querySelector(".form__item_type_name"),p.querySelector(".form__item_type_job"),p.querySelector(".popup__saved-button"),l.querySelector(".popup__saved-button"),_.querySelector(".profile__title"),_.querySelector(".profile__subtitle"),document.querySelector(".elements__list-template"),l.querySelector(".form__item_type_name"),l.querySelector(".form__item_type_job"),new class extends t{constructor(e){super(e),this._image=this._popup.querySelector(".popup__image"),this._text=this._popup.querySelector(".popup__text")}open=(e,t)=>{this._text.textContent=e,this._image.alt=e,this._image.src=t,super.open()}}(".popup_type_image"));d.setEventListeners();const m=new class{constructor(e){this._profileName=document.querySelector(e.nameSelector),this._profileText=document.querySelector(e.jobSelector)}getUserInfo(){return{firstname:this._profileName.textContent,description:this._profileText.textContent}}serUserInfo(e){this._profileName.textContent=e.firstname,this._profileText.textContent=e.description}}({nameSelector:".profile__title",jobSelector:".profile__subtitle"}),S=new s(".popup_type_edit",(function(e){m.serUserInfo(e),S.close()}));S.setEventListeners(),c.addEventListener("click",(function(){S.setInputsValues(m.getUserInfo()),console.log(m.getUserInfo()),S.open()}));const y=new s(".popup_type_add",(function(e){console.log("open"),v.addItem(f(e)),y.close()}));function f(t){return new e(t.title,t.link,d.open,".elements-template").generateCard()}y.setEventListeners(),a.addEventListener("click",(function(){y.open()}));const v=new class{constructor({data:e,renderer:t},s){this._initialArray=e,this.renderer=t,this._container=document.querySelector(s)}addItem(e){this._container.prepend(e)}renderItems(){this._initialArray.forEach((e=>{this.renderer(e)}))}}({data:o,renderer:e=>{v.addItem(f(e))}},".elements__list-template");v.renderItems();const b=new r(i,p),g=new r(i,h);b.enableValidation(),g.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkMsUUFBUUMsRUFBV3BDLEdBQU0sR0FKekIsNEJBU3pCa0MsRUFBaUJVLGNBS2pCLE1BQU1DLEVBQW9CLElBQUl0RSxFQUFjUCxFQUFrQmlELEdBQ3hENkIsRUFBbUIsSUFBSXZFLEVBQWNQLEVBQWtCa0QsR0FHN0QyQixFQUFrQnJDLG1CQUNsQnNDLEVBQWlCdEMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzcy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuY29uc3RydWN0b3IodGl0bGUsIGxpbmssIGhhbmRsZUNhcmRDbGljaywgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIH1cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICAvLyDQt9Cw0LHQuNGA0LDQtdC8INGA0LDQt9C80LXRgtC60YMg0LjQtyBIVE1MINC4INC60LvQvtC90LjRgNGD0LXQvCDRjdC70LXQvNC10L3RglxyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKVxyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX2RldGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpXHJcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1idXR0b24nKVxyXG5cclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8g0LvQsNC50LrQsFxyXG4gICAgX2xpa2VDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKVxyXG4gICAgfTtcclxuICAgIC8v0KTRg9C90LrRhtC40Y8g0YPQtNCw0LvQtdC90LjRj1xyXG4gICAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgLy90aGlzLl9kZXRldGUgPSB0aGlzLl9kZXRldGUuY2xvc2VzdCgnLmVsZW1lbnQnKVxyXG4gICAgICAgIC8vdGhpcy5fZGV0ZXRlLnJlbW92ZSgpXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsXHJcbiAgICB9XHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC60LDRgNGC0LjQvdC60LggXHJcbiAgICAvLyBoYW5kbGVDYXJkQ2xpY2soKXtcclxuICAgIC8vICAgICB0aGlzLl9pbWFnZS5vcGVuKClcclxuICAgIC8vIH1cclxuICAgIG9wZW5JbWcgKCl7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcclxuICAgIH1cclxuICAgIC8v0YHQu9GD0YjQsNGC0LXQu9C4XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy/RgdC70YPRiNCw0YLQtdC70Ywg0LvQsNC50LrQsFxyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUNhcmQoKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8v0YHQu9GD0YjQsNGC0LXQu9GMINGD0LTQsNC70Y/Qu9C60LhcclxuICAgICAgICB0aGlzLl9kZXRldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vINGB0LvRg9GI0LDRgtC10LvRjCDQvtGC0LrRgNGL0YLQuNGPINC60LDRgNGC0LjQvdC60LggXHJcbiAgICAgICAgLy8gdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuSW1nKClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgICAgIC8vICAgfSk7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgLy90aGlzLl9wb3B1cCA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v0J7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/Ly9cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKVxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxyXG5cclxuICAgIH1cclxuICAgIC8v0JfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/Ly9cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIilcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIH1cclxuICAgIC8v0JfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/IEVzYy8vXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/QodC70YPRiNCw0YLQtdC70Ywg0LfQsNC60YDRi9GC0LjRjywg0L3QsNC20LjQvNCw0Y8g0L3QsCDRgtC10LzQvS7RjdC60YDQsNC9INC4INC30LDQutGA0YvRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0LrRgNC10YHRgtC40LovL1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXRBZGQpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLmZvcm1TdWJtaXRBZGQgPSBmb3JtU3VibWl0QWRkO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2l0ZW0nKTtcclxuICAgICAgICB0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19zYXZlZC1idXR0b24nKTtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKClcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLnZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnB1dHNWYWx1ZXMoZGF0YVVzZXIpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSBkYXRhVXNlcltpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgIF9vblN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLmZvcm1TdWJtaXRBZGQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fb25TdWJtaXQpIFxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAvLyAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICAgICB0aGlzLmZvcm1TdWJtaXRBZGQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAvLyAgICAgfSlcclxuICAgICAgIC8vIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5mb3JtU3VibWl0QWRkKVxyXG4gICAgICAgIC8vIChldnQpID0+IHsgXHJcbiAgICAgICAgLy8gICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLl9mb3JtU3VibWl0QWRkKHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgIC8vIH0pXHJcbiAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgXHJcblxyXG4iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9ICh7XHJcbiAgICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2l0ZW0nLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmVkLWJ1dHRvbicsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVkLWJ1dHRvbl9kaXNhYmxlZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pdGVtLWVycm9yJyxcclxuICAgIGVycm9yQ2xhc3M6ICdlcnJvcl9vcGVuZWQnXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtU2VsZWN0b3IgPSBmb3JtLFxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3IsXHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yLFxyXG4gICAgICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MsXHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MsXHJcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcyxcclxuXHJcbiAgICAgICAgICAgIC8vdGhpcy5fZm9ybSA9IEFycmF5LmZyb20odGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSlcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLl9mb3JtKVxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpXHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuICAgIH1cclxuXHJcbiAgICAvLyDQutC90L7Qv9C60LAg0LDQutGC0LjQslxyXG4gICAgX2VuYWJsZUJ1dHRvbihidXR0b24pIHtcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgICAgIGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKVxyXG4gICAgfVxyXG4gICAgLy8g0LrQvdC+0L/QutCwINC90LXQsNC60YLQuNCyXHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbikge1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXHJcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpXHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8gINC/0L7Qu9GPIGMg0L7RiNC40LHQutC+0LlcclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZVxyXG4gICAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAgLy8g0KTRg9C90LrRhtC40Y8gINC/0L7Qu9GPINCx0LXQtyDQvtGI0LjQsdC60LhcclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBcIlwiXHJcbiAgICAgICAgZm9ybUVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoZm9ybUlucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1JbnB1dC5zb21lKGl0ZW0gPT4gIWl0ZW0udmFsaWRpdHkudmFsaWQpXHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgICAgIGlmIChpbnB1dC5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gLy/RhNGD0L3QutGG0LjRjyDRgdC70YPRiNCw0YLQtdC70LXQuVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbilcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dClcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbilcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH07XHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpe1xyXG4gICAgXHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgKHRoaXMuX2VuYWJsZUJ1dHRvbigodGhpcy5fc3VibWl0QnV0dG9uKSkpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpOyBcclxuICBcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIH1cclxuICAgIC8vICAgLy/RhNGD0L3QutGG0LjRjyDQt9Cw0L/Rg9GB0LrQsCDQstGL0LvQuNC00LDRhtC40LhcclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQodCw0YXQsNC70LjQvScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzY1NTM1LzUxNjY0MzEzNzA1XzU3MTM3OTEyNTdfay5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHRpdGxlOiAn0JTQsNCz0LXRgdGC0LDQvScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzE5NTgvNDQzNjg5NzgzMDRfMjczMmI1ODMyNV9rLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcclxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9saXZlLnN0YXRpY2ZsaWNrci5jb20vNjU1MzUvNDg4MjAxMDA1MzJfODdhMWNlYjEwZF9rLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aXRsZTogJ9CR0LDQudC60LDQuycsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzY1NTM1LzUxNDIxMjA1NDM0Xzg5MTNmNGExYTVfay5qcGcnXHJcbiAgICB9XHJcbl07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIlxyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnXHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJ1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnXHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJ1xyXG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJ1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJ1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tICcuLi91dGlsc3MvY29uc3RhbnRzLmpzJ1xyXG5pbXBvcnQgJy4vaW5kZXguY3NzJ1xyXG5pbml0aWFsQ2FyZHMucmV2ZXJzZSgpO1xyXG4vLyDQndCw0YXQvtC00LjQvCBwb3B1cFxyXG5jb25zdCBwb3B1cEVkaXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XHJcbmNvbnN0IHBvcHVwQWRkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hZGRcIik7XHJcbmNvbnN0IHBvcHVwT3BlbkltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxuXHJcbmNvbnN0IHBvcHVwT3BlbkltYWdlVGV4dCA9IHBvcHVwT3BlbkltYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190ZXh0XCIpO1xyXG5jb25zdCBwb3B1cE9wZW5JbWFnZSA9IHBvcHVwT3BlbkltYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuLy9leHBvcnQgeyBwb3B1cE9wZW5JbWFnZUVsZW1lbnQsIHBvcHVwT3BlbkltYWdlVGV4dCwgcG9wdXBPcGVuSW1hZ2UgfVxyXG5cclxuLy8g0J3QsNGF0L7QtNC40Lwg0LrQvdC+0L/QutC4XHJcbmNvbnN0IHByb2ZpbGVCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbkVsZW1lbnQgPSBwcm9maWxlQnV0dG9uRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQnV0dG9uRWxlbWVudCA9IHByb2ZpbGVCdXR0b25FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vINCd0LDRhdC+0LTQuNC8INC/0L7Qu9GPINGE0L7RgNC80Ysg0LIgRE9NXHJcbmNvbnN0IGZvcm1FbGVtZW50RWRpdCA9IHBvcHVwRWRpdEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5jb25zdCBmb3JtRWxlbWVudEFkZCA9IHBvcHVwQWRkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcblxyXG5jb25zdCBuYW1lRWRpdElucHV0ID0gZm9ybUVsZW1lbnRFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faXRlbV90eXBlX25hbWVcIik7XHJcbmNvbnN0IGpvYkVkaXRJbnB1dCA9IGZvcm1FbGVtZW50RWRpdC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2l0ZW1fdHlwZV9qb2JcIik7XHJcblxyXG5cclxuY29uc3QgYnV0dG9uU2F2ZWRJbnB1dCA9IGZvcm1FbGVtZW50RWRpdC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBidXR0b25DcmVhdGVJbnB1dCA9IHBvcHVwQWRkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlZC1idXR0b25cIik7XHJcblxyXG5jb25zdCBuYW1lVGl0bGUgPSBwcm9maWxlQnV0dG9uRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBqb2JTdWJ0aXRsZSA9IHByb2ZpbGVCdXR0b25FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XHJcblxyXG5jb25zdCBsaXN0Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlzdC10ZW1wbGF0ZScpXHJcbmNvbnN0IG5hbWVBZGRJbnB1dCA9IHBvcHVwQWRkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2l0ZW1fdHlwZV9uYW1lXCIpO1xyXG5jb25zdCBqb2JBZGRJbnB1dCA9IHBvcHVwQWRkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2l0ZW1fdHlwZV9qb2JcIik7XHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuY29uc3QgcG9wdXBPcGVuSW1hZ2VFbGVtZW50U2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2ltYWdlXCJcclxuXHJcbmNvbnN0IHBvcHVwT3BlbkltYWdlU2VjdGlvbiA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cE9wZW5JbWFnZUVsZW1lbnRTZWxlY3RvcilcclxucG9wdXBPcGVuSW1hZ2VTZWN0aW9uLnNldEV2ZW50TGlzdGVuZXJzKClcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy/Qn9C+0L/QsNC/IEVESVRcclxuY29uc3QgY29uZmlnID0ge1xyXG4gICAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJyxcclxuICAgIGpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX3N1YnRpdGxlJ1xyXG59XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKGNvbmZpZyk7XHJcbi8vL9Ch0L7QsdGL0YLQuNC1IEVESVQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmNvbnN0IHBvcHVwRWRpdEVsZW1lbnRTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfZWRpdFwiXHJcbmNvbnN0IGVkaXRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFZGl0RWxlbWVudFNlbGVjdG9yLCBmb3JtU3VibWl0RWRpdClcclxuXHJcbmZ1bmN0aW9uIGZvcm1TdWJtaXRFZGl0KGl0ZW0pIHtcclxuICAgIHVzZXJJbmZvLnNlclVzZXJJbmZvKGl0ZW0pO1xyXG4gICAgZWRpdFBvcHVwV2l0aEZvcm0uY2xvc2UoKVxyXG59XHJcbmVkaXRQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKClcclxuLy8v0JjQutC+0L3QutCwIEVESVQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudEZ1bmN0aW9uKTtcclxuZnVuY3Rpb24gcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbiAgICBlZGl0UG9wdXBXaXRoRm9ybS5zZXRJbnB1dHNWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSlcclxuICAgIGNvbnNvbGUubG9nKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gICAgZWRpdFBvcHVwV2l0aEZvcm0ub3BlbigpXHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIHByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudEZ1bmN0aW9uKCkge1xyXG4vLyAgICAgZWRpdFBvcHVwV2l0aEZvcm0ub3BlbigpXHJcbi8vICAgICBjb25zdCBwcm9maWxlRGF0YSAgPSB1c2VySW5mby5nZXRVc2VySW5mbygpIC8vINCS0L7RgiDRgtGD0YIg0LIg0L/QtdGA0LXQvNC10L3QvdGD0Y4gcHJvZmlsZURhdGEg0L/QvtC70L7QttC40LvQuCDQvtCx0YrQtdC60YIsINGC0L7RgiDRh9GC0L4g0YLRiyDQutC+0L3RgdC+0LvRjNC70L7Qs9C40YDRg9C10YjRjCDQvdCwINGB0LrRgNC40L3RiNC+0YLQtSBcclxuLy8gICBjb25zb2xlLmxvZyhwcm9maWxlRGF0YSk7XHJcbi8vICAgICBuYW1lRWRpdElucHV0LnZhbHVlID0gcHJvZmlsZURhdGEuZmlyc3RuYW1lXHJcbi8vICAgICBqb2JFZGl0SW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5kZXNjcmlwdGlvblxyXG4vLyAgIH1cclxuICBcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy/Qn9C+0L/QsNC/IEFEXHJcbi8v0J/QoNCe0JHQm9CV0JzQkCDQoSDQodCe0JHQq9Ci0JjQldCcLy9cclxuY29uc3QgcG9wdXBBZGRFbGVtZW50U2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2FkZFwiXHJcbmNvbnN0IGFkZHRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRFbGVtZW50U2VsZWN0b3IsIGZvcm1TdWJtaXRBZGQpXHJcblxyXG5mdW5jdGlvbiBmb3JtU3VibWl0QWRkKGl0ZW0pIHtcclxuICAgIGNvbnNvbGUubG9nKCdvcGVuJyk7XHJcbiAgICBjYXJkc0xpc3RTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XHJcbiAgICBhZGR0UG9wdXBXaXRoRm9ybS5jbG9zZSgpXHJcbn07XHJcbmFkZHRQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKClcclxuXHJcbi8vL9CY0LrQvtC90LrQsCBBREQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnByb2ZpbGVBZGRCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnRGdW5jdGlvbik7XHJcbmZ1bmN0aW9uIHByb2ZpbGVBZGRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbiAgICBhZGR0UG9wdXBXaXRoRm9ybS5vcGVuKClcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v0YDQtdCw0LvQuNC30LDRhtC40Y8g0LrQu9Cw0YHRgdCwIFNlY3Rpb24vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICAgIGNvbnN0IGNhcmRzID0gbmV3IENhcmQoaXRlbS50aXRsZSwgaXRlbS5saW5rLCBwb3B1cE9wZW5JbWFnZVNlY3Rpb25cclxuICAgICAgICAub3BlbiwgJy5lbGVtZW50cy10ZW1wbGF0ZScpO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkcy5nZW5lcmF0ZUNhcmQoKVxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gJy5lbGVtZW50c19fbGlzdC10ZW1wbGF0ZSc7XHJcbmNvbnN0IGNhcmRzTGlzdFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XHJcbiAgICBkYXRhOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICBjYXJkc0xpc3RTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XHJcbiAgICB9XHJcbn0sXHJcbiAgICBjYXJkTGlzdFNlbGVjdG9yXHJcbik7XHJcbmNhcmRzTGlzdFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy/QlNC70Y8g0LrQsNC20LTQvtC5INGB0L7Qt9C00LDQtdC8INGN0LrRgNC10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0LLQsNC70LjQtNCw0YLQvtGA0LAuINCt0LrQt9C10LzQv9C70Y/RgCDQuNC70Lgg0LjQvdGB0YLQsNC90YEgLSDRjdGC0L4g0YDQtdC30YPQu9GM0YLQsNGCINCy0YvQt9C+0LLQsCBuZXcgRm9ybVZhbGlkYXRvcigpXHJcbmNvbnN0IGZvcm1FZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnRFZGl0KVxyXG5jb25zdCBmb3JtQWRkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnRBZGQpXHJcblxyXG4vLyAgLy9cItCS0LrQu9GO0YfQsNC10LxcIiDQv9C+0LTQv9C40YHQutC4INC90LAg0LjQt9C80LXQvdC10L3QuNGPINCyINC40L3Qv9GD0YLQsNGFXHJcbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxyXG5mb3JtQWRkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fdGV4dCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RleHRcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKHRpdGxlLCBsaW5rKSA9PiB7XHJcbiAgICB0aGlzLl90ZXh0LnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aXRsZVxyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHN1cGVyLm9wZW4oKVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLm5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmpvYlNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgLy8gdGhpcy5fbmFtZUVkaXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faXRlbV90eXBlX25hbWVcIik7XHJcbiAgICAgICAgICAgICAgIC8vIHRoaXMuX2pvYkVkaXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faXRlbV90eXBlX2pvYlwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVUZXh0LnRleHRDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3RuYW1lOiAgdGhpcy5fbmFtZUVkaXRJbnB1dC52YWx1ZSA9IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LCBcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdGlvbjogdGhpcy5fam9iRWRpdElucHV0LnZhbHVlID0gdGhpcy5fcHJvZmlsZVRleHQudGV4dENvbnRlbnQgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHNlclVzZXJJbmZvKGRhdGFVc2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGFVc2VyLmZpcnN0bmFtZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZmlsZVRleHQudGV4dENvbnRlbnQgPSBkYXRhVXNlci5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuLy8gZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4vLyAgICAgY29uc3RydWN0b3IobmFtZSwgdGV4dCkge1xyXG4vLyAgICAgICAgIHRoaXMuX2lucHV0TmFtZSA9IG5hbWVcclxuLy8gICAgICAgICB0aGlzLl9pbnB1dFRleHQgPSB0ZXh0XHJcbi8vICAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcclxuLy8gICAgICAgICB0aGlzLl9wcm9maWxlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpO1xyXG4vLyAgICAgfVxyXG4gICBcclxuLy8gICAgIGdldFVzZXJJbmZvKCkge1xyXG4vLyAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgbmFtZTogdGhpcy5faW5wdXROYW1lLnZhbHVlID0gdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbi8vICAgICAgICAgdGV4dDogdGhpcy5faW5wdXRUZXh0LnZhbHVlID0gdGhpcy5fcHJvZmlsZVRleHQudGV4dENvbnRlbnRcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcbi8vICAgICAvLyBzZXJVc2VySW5mbyhuYW1lLCB0ZXh0KSB7XHJcbi8vICAgICAvLyAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lXHJcbi8vICAgICAvLyAgICAgdGhpcy5fcHJvZmlsZVRleHQudGV4dENvbnRlbnQgPSB0ZXh0XHJcbi8vICAgICAvLyAgfVxyXG4vLyAgICAgc2V0VXNlckluZm8oKSB7XHJcblxyXG4vLyAgICAgICAgIHRoaXMuX2lucHV0TmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX3Byb2ZpbGVOYW1lLnZhbHVlLFxyXG4vLyAgICAgICAgIHRoaXMuX2lucHV0VGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX3Byb2ZpbGVUZXh0LnZhbHVlXHJcblxyXG4vLyAgICAgfVxyXG4vLyB9IiwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBkYXRhO1xyXG4gICAgICAgLy8gdGhpcy5faXRlbXM9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgLy90aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpXHJcbiAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxyXG4gICAgfVxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAvL3JlbmRlcmVyKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyKGl0ZW0pXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG5cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwibGluayIsImhhbmRsZUNhcmRDbGljayIsInRlbXBsYXRlU2VsZWN0b3IiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsIl9lbGVtZW50IiwidGV4dENvbnRlbnQiLCJfaW1hZ2UiLCJhbHQiLCJzcmMiLCJfZGV0ZXRlIiwiX2J1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQ2FyZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9kZWxldGVDYXJkIiwicmVtb3ZlIiwib3BlbkltZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJvcGVuIiwiYWRkIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRBZGQiLCJzdXBlciIsIl9mb3JtIiwiX2lucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9mb3JtQnV0dG9uIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dHNWYWx1ZXMiLCJkYXRhVXNlciIsIl9vblN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsIl9zdWJtaXRCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiYnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiZGlzYWJsZUJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsIl9zaG93SW5wdXRFcnJvciIsImZvcm1FcnJvciIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZm9ybUlucHV0Iiwic29tZSIsIml0ZW0iLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImNoZWNrVmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJpbml0aWFsQ2FyZHMiLCJyZXZlcnNlIiwicG9wdXBFZGl0RWxlbWVudCIsInBvcHVwQWRkRWxlbWVudCIsInBvcHVwT3BlbkltYWdlRWxlbWVudCIsInByb2ZpbGVCdXR0b25FbGVtZW50IiwicHJvZmlsZUVkaXRCdXR0b25FbGVtZW50IiwicHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnQiLCJmb3JtRWxlbWVudEVkaXQiLCJmb3JtRWxlbWVudEFkZCIsInBvcHVwT3BlbkltYWdlU2VjdGlvbiIsIl90ZXh0IiwidXNlckluZm8iLCJfcHJvZmlsZU5hbWUiLCJuYW1lU2VsZWN0b3IiLCJfcHJvZmlsZVRleHQiLCJqb2JTZWxlY3RvciIsImdldFVzZXJJbmZvIiwiZmlyc3RuYW1lIiwiZGVzY3JpcHRpb24iLCJzZXJVc2VySW5mbyIsImVkaXRQb3B1cFdpdGhGb3JtIiwiY29uc29sZSIsImxvZyIsImFkZHRQb3B1cFdpdGhGb3JtIiwiY2FyZHNMaXN0U2VjdGlvbiIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwiZGF0YSIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfaW5pdGlhbEFycmF5IiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJmb3JtRWRpdFZhbGlkYXRvciIsImZvcm1BZGRWYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9