(()=>{"use strict";class t{constructor(t,e,s,o,i){this._name=t.name,this._link=t.link,this._myid=t.myid,this._cardId=t._id,this._likes=t.likes,this._likesLength=t.likes.length,this._putLike=i,this._ownerId=t.owner._id,this._openConfirm=o,this._templateSelector=s,this.handleCardClick=e}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_visibleDeleteButton(){this._myid===this._ownerId?this._detete.style.visibility="visible":this._myid!==this._ownerId&&(this._detete.style.visibility="hidden")}_countLike(){this._likes.forEach((t=>{t._id!==this._myid?this._counter.textContent=this._likesLength:this._button.classList.add("element__like-button_active")}))}generateCard(){return this._element=this._getTemplate(),this._counter=this._element.querySelector(".element__like-count"),this._detete=this._element.querySelector(".element__delete"),this._button=this._element.querySelector(".element__like-button"),this._image=this._element.querySelector(".element__image"),this._text=this._element.querySelector(".element__title"),this._text.textContent=this._name,this._image.alt=this._name,this._image.src=this._link,this._countLike(),this._visibleDeleteButton(),this._setEventListeners(),this._element}_likeCard(){this._putLike(this._button,this._cardId)}toggleLike(t){this._button.classList.toggle("element__like-button_active"),this._counter.textContent=t.length}_deleteButtonCard(){this._element.remove(),this._element=null}openImg(){this.handleCardClick(this._name,this._link)}_handleOpenDelete(){this._openConfirm(this._id)}_setEventListeners(){this._button.addEventListener("click",(()=>{this._likeCard()})),this._image.addEventListener("click",(()=>{this.openImg()})),this._detete.addEventListener("click",(()=>{this._handleOpenDelete()}))}}class e{constructor(t){this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._popupCloseButton=this._popup.querySelector(".popup__close")}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popup.addEventListener("mousedown",(t=>{t.target===t.currentTarget&&this.close()})),this._popupCloseButton.addEventListener("click",(()=>{this.close()}))}}class s extends e{constructor(t,e){super(t),this.formSubmitAdd=e,this._form=this._popup.querySelector(".form"),this._input=this._popup.querySelectorAll(".form__item"),console.log(this._input),this._popupButton=this._popup.querySelector(".popup__saved-button"),this._popupButtonLoading=this._popupButton.textContent}close(){super.close(),this._form.reset()}_getInputValues(){return this.values={},this._input.forEach((t=>{this.values[t.name]=t.value})),this.values}setInputsValues(t){this._input.forEach((e=>{e.value=t[e.name]}))}_onSubmit=t=>{t.preventDefault(),this._popupButton.textContent=`${this._popupButton.textContent}...`,this.formSubmitAdd(this._getInputValues())};setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._onSubmit)}setButtonText(t){this._popupButton.textContent=this._popupButtonLoading}}const o={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".popup__saved-button",inactiveButtonClass:"popup__saved-button_disabled",inputErrorClass:"form__item-error",errorClass:"error_opened"};class i{constructor(t,e){this.formSelector=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=Array.from(this.formSelector.querySelectorAll(this._inputSelector)),this._submitButton=this.formSelector.querySelector(this._submitButtonSelector)}_enableButton(t){t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled")}disableButton(t){t.classList.add(this._inactiveButtonClass),t.setAttribute("disabled",!0)}_showInputError(t){const e=document.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=document.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_hasInvalidInput(t){return t.some((t=>!t.validity.valid))}_checkInputValidity(t){t.checkValidity()?this._hideInputError(t):this._showInputError(t)}setEventListeners(){this.disableButton(this._submitButton),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this.toggleButtonState(),this._checkInputValidity(t)}))}))}toggleButtonState(){this._hasInvalidInput(this._inputList)?this.disableButton(this._submitButton):this._enableButton(this._submitButton)}resetValidation(){this.toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}enableValidation(){this.setEventListeners()}}const n=document.querySelector(".popup_type_edit"),r=document.querySelector(".popup_type_add"),a=(document.querySelector(".popup_type_image"),document.querySelector(".popup_type_confirm"),document.querySelector(".popup_type_avatar")),l=document.querySelector(".profile"),u=l.querySelector(".profile__edit-button"),h=l.querySelector(".profile__add-button"),c=n.querySelector(".form"),_=r.querySelector(".form"),p=a.querySelector(".form"),d=new class{constructor(t){this._url=t.baseUrl,this._headers=t.headers,this._authorization=t.headers.authorization}_checkResponse(t){return t.ok?t.json():Promise.reject(`Что-то пошло не так: ${t.status}`)}getInfo(){return fetch(`${this._url}/users/me`,{headers:{authorization:this._authorization,"Content-Type":"application/json"}}).then(this._checkResponse)}getCard(){return fetch(`${this._url}/cards`,{headers:{authorization:this._authorization,"Content-Type":"application/json"}}).then(this._checkResponse)}setUserInfo(t){return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.firstname,about:t.description})}).then(this._checkResponse)}setUserAvatar(t){return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(this._checkResponse)}addCard(t){return fetch(`${this._url}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t.title,link:t.link})}).then(this._checkResponse)}addLike(t){return fetch(`${this._url}/cards/${t}/likes`,{method:"PUT",headers:{authorization:this._authorization}}).then(this._checkResponse)}deleteLike(t){return fetch(`${this._url}/cards/${t}/likes`,{method:"DELETE",headers:{authorization:this._authorization}}).then(this._checkResponse)}deleteCard(t){return fetch(`${this._url}/cards/${t}`,{method:"DELETE",headers:{authorization:this._authorization}}).then(this._checkResponse)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66",headers:{authorization:"26786be3-fed9-4d83-9ae2-1348eee1b7d5","Content-Type":"application/json"}}),m=new class extends e{constructor(t){super(t),this._image=this._popup.querySelector(".popup__image"),this._text=this._popup.querySelector(".popup__text")}open=(t,e)=>{this._text.textContent=t,this._image.alt=t,this._image.src=e,super.open()}}(".popup_type_image");m.setEventListeners();const f=new class{constructor(t){this._profileName=document.querySelector(t.nameSelector),this._profileText=document.querySelector(t.jobSelector),this._profileAvatar=document.querySelector(t.avatarSelector)}getUserInfo(){return{firstname:this._profileName.textContent,description:this._profileText.textContent}}serUserInfo({avatar:t,firstname:e,description:s}){this._profileAvatar.src=t,this._profileName.textContent=e,this._profileText.textContent=s}}({nameSelector:".profile__title",jobSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),v=new s(".popup_type_edit",(function(t){d.setUserInfo(t).then((t=>{f.serUserInfo({avatar:t.avatar,firstname:t.name,description:t.about})})).catch((t=>console.error(`Ошибка при редактировании ${t}`))).finally((()=>v.setButtonText())),v.close()}));v.setEventListeners(),u.addEventListener("click",(function(){v.setInputsValues(f.getUserInfo()),console.log(f.getUserInfo()),v.open()}));const y=new s(".popup_type_add",(function(t){console.log("open"),Promise.all([d.getInfo(),d.addCard(t)]).then((([t,e])=>{console.log(e),e.myid=t._id,L.addItem(C(e)),y.close()})).catch((t=>console.error(`Ошибка при создании карточки ${t}`))).finally((()=>y.setButtonText()))}));y.setEventListeners(),h.addEventListener("click",(function(){y.open()}));const S=new s(".popup_type_avatar",(function(t){d.setUserAvatar(t).then((t=>{console.log(t),f.serUserInfo({avatar:t.avatar,firstname:t.name,description:t.about})})).catch((t=>console.error(`Ошибка при редактировании аватара ${t}`))).finally((()=>S.setButtonText())),S.close(),console.log("Close")}));S.setEventListeners();const b=document.querySelector(".profile__avatar-button");console.log(b),b.addEventListener("click",(function(){S.open()})),document.querySelector(".popup__saved-button_confirms");const g=new class extends e{constructor(t,e){super(t),this.formSubmit=e,this.popupButton=this._popup.querySelector(".popup__saved-button"),this.popupButtonLoading=this.popupButton.textContent}_submit=t=>{t.preventDefault(),this.popupButton.textContent=`${this.popupButton.textContent}...`,this.formSubmit({card:this._element,cardID:this._cardID})};setEventListeners(){super.setEventListeners(),this.popupButton.addEventListener("click",this._submit)}setButtonText(t){this.popupButton.textContent=this.popupButtonLoading}open=(t,e)=>{super.open(),this._element=t,this._cardID=e}}(".popup_type_confirm",(function({card:t,cardId:e}){console.log("x"),d.deleteCard(e).then((t=>{console.log(t),e.deleteButtonCard(),g.close()})).catch((t=>console.error(`Ошибка при удалении карточки ${t}`))).finally((()=>g.setButtonText()))}));function C(e){const s=new t(e,m.open,".elements-template",g.open,((t,e)=>{t.classList.contains("element__like-button_active")?d.deleteLike(e).then((t=>{console.log(t),s.toggleLike(t.likes)})).catch((t=>console.error(`Ошибка при удалении лайка ${t}`))):d.addLike(e).then((t=>{console.log(t),s.toggleLike(t.likes)})).catch((t=>console.error(`Ошибка при поставк лайка ${t}`)))}));return s.generateCard()}g.setEventListeners();const L=new class{constructor(t,e){this.renderer=t,this._container=document.querySelector(e)}addItem(t){this._container.prepend(t)}renderItems(t){t.forEach((t=>{this.renderer(t)}))}}((t=>{L.addItem(C(t))}),".elements__list-template"),k=new i(o,c),E=new i(o,_),B=new i(o,p);k.enableValidation(),E.enableValidation(),B.enableValidation(),Promise.all([d.getInfo(),d.getCard()]).then((([t,e])=>{console.log(e),e.forEach((e=>{e.myid=t._id})),console.log(t),f.serUserInfo({avatar:t.avatar,firstname:t.name,description:t.about}),L.renderItems(e)})).catch((t=>console.error(`Ошибка при начальных данный страницы ${t}`)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S1YsTUFDWGxNLFlBQVltTixFQUFVQyxHQUdsQjlNLEtBQUs2TSxTQUFXQSxFQUNoQjdNLEtBQUsrTSxXQUFhNUwsU0FBU0MsY0FBYzBMLEVBQzdDLENBQ0FqQixRQUFRaEssR0FFTDdCLEtBQUsrTSxXQUFXQyxRQUFRbkwsRUFDM0IsQ0FDQW9MLFlBQVl0RCxHQUVSQSxFQUFLL0gsU0FBUXlGLElBQ1RySCxLQUFLNk0sU0FBU3hGLEVBQUssR0FFdkIsSUx5SjhCQSxJQUNsQ3VFLEVBQWlCQyxRQUFRQyxFQUFXekUsR0FBTSxHQUZyQiw0QkFVbkI2RixFQUFvQixJQUFJdEgsRUFBY1AsRUFBa0IrQyxHQUN4RCtFLEVBQW1CLElBQUl2SCxFQUFjUCxFQUFrQmdELEdBQ3ZEK0UsRUFBc0IsSUFBSXhILEVBQWNQLEVBQWtCaUQsR0FHaEU0RSxFQUFrQnJGLG1CQUNsQnNGLEVBQWlCdEYsbUJBQ2pCdUYsRUFBb0J2RixtQkFFcEJzQixRQUFRdUMsSUFBSSxDQUFDbkQsRUFBSWUsVUFBV2YsRUFBSWtCLFlBQzNCRCxNQUFLLEVBQUV4RSxFQUFVMkcsTUFDZHJILFFBQVFDLElBQUlvSCxHQUNaQSxFQUFTL0osU0FBUUMsSUFDYkEsRUFBUXZCLEtBQU8wRSxFQUFTeEUsR0FBRyxJQUUvQjhELFFBQVFDLElBQUlTLEdBQ1o0RixFQUFTUSxZQUFZLENBQUVoQixPQUFRcEYsRUFBU29GLE9BQVFKLFVBQVdoRixFQUFTOUUsS0FBTWdLLFlBQWFsRixFQUFTaUYsUUFDaEcyQixFQUFpQnFCLFlBQVl0QixFQUFTLElBRXpDTCxPQUFPQyxHQUFVakgsUUFBUWlILE1BQU8sd0NBQXVDQSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIHRlbXBsYXRlU2VsZWN0b3IsIG9wZW5Db25maXJtLCBwdXRMaWtlKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fbXlpZCA9IGNhcmREYXRhLm15aWQ7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkXHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5saWtlcztcclxuICAgICAgICB0aGlzLl9saWtlc0xlbmd0aCA9IGNhcmREYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLl9wdXRMaWtlID0gcHV0TGlrZTtcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gY2FyZERhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX29wZW5Db25maXJtID0gb3BlbkNvbmZpcm1cclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuXHJcbiAgICB9XHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICAgLy8g0LfQsNCx0LjRgNCw0LXQvCDRgNCw0LfQvNC10YLQutGDINC40LcgSFRNTCDQuCDQutC70L7QvdC40YDRg9C10Lwg0Y3Qu9C10LzQtdC90YJcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgICAgICAgIC5jb250ZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgX3Zpc2libGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX215aWQgPT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGV0ZXRlLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSdcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX215aWQgIT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGV0ZXRlLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9jb3VudExpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuX2lkID09PSB0aGlzLl9teWlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlJylcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0xlbmd0aFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9jb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudCcpXHJcbiAgICAgICAgdGhpcy5fZGV0ZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlJylcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWJ1dHRvbicpXHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpXHJcbiAgICAgICAgdGhpcy5fdGV4dCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJylcclxuICAgICAgICB0aGlzLl90ZXh0LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5fY291bnRMaWtlKClcclxuICAgICAgICB0aGlzLl92aXNpYmxlRGVsZXRlQnV0dG9uKClcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8g0LvQsNC50LrQsFxyXG4gICAgX2xpa2VDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX3B1dExpa2UodGhpcy5fYnV0dG9uLCB0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgLy8gdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpXHJcbiAgICB9O1xyXG4gICAgdG9nZ2xlTGlrZShsaWtlcykge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKVxyXG4gICAgICAgIHRoaXMuX2NvdW50ZXIudGV4dENvbnRlbnQgPSBsaWtlcy5sZW5ndGhcclxuICAgIH1cclxuICAgIC8v0KTRg9C90LrRhtC40Y8g0YPQtNCw0LvQtdC90LjRj1xyXG4gICAgX2RlbGV0ZUJ1dHRvbkNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIG9wZW5JbWcoKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcclxuICAgIH1cclxuICAgIF9oYW5kbGVPcGVuRGVsZXRlKCkge1xyXG4gICAgICAgIC8vIHRoaXMuX29wZW5Db25maXJtKHtjYXJkOiB0aGlzLCBjYXJkSUQ6IHRoaXMuX2NhcmRJRCB9KVxyXG4gICAgICAgIHRoaXMuX29wZW5Db25maXJtKHRoaXMuX2lkKVxyXG4gICAgfVxyXG4gICAgLy/RgdC70YPRiNCw0YLQtdC70LhcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvL9GB0LvRg9GI0LDRgtC10LvRjCDQu9Cw0LnQutCwXHJcbiAgICAgICAgdGhpcy5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlQ2FyZCgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL9GB0LvRg9GI0LDRgtC10LvRjCDRg9C00LDQu9GP0LvQutC4XHJcbiAgICAgICAgLy8gdGhpcy5fZGV0ZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLl9kZWxldGVCdXR0b25DYXJkKClcclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIC8v0YHQu9GD0YjQsNGC0LXQu9GMINC+0YLQutGA0YvRgtC40Y8g0LrQsNGA0YLQuNC90LrQuFxyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5JbWcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIC8v0YHQu9GD0YjQsNGC0LXQu9GMIFxyXG4gICAgICAgIHRoaXMuX2RldGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlT3BlbkRlbGV0ZSgpXHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgLy90aGlzLl9wb3B1cCA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v0J7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/Ly9cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKVxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxyXG5cclxuICAgIH1cclxuICAgIC8v0JfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/Ly9cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIilcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIH1cclxuICAgIC8v0JfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/IEVzYy8vXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/QodC70YPRiNCw0YLQtdC70Ywg0LfQsNC60YDRi9GC0LjRjywg0L3QsNC20LjQvNCw0Y8g0L3QsCDRgtC10LzQvS7RjdC60YDQsNC9INC4INC30LDQutGA0YvRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0LrRgNC10YHRgtC40LovL1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXRBZGQpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLmZvcm1TdWJtaXRBZGQgPSBmb3JtU3VibWl0QWRkO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2l0ZW0nKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9pbnB1dCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQnV0dG9uTG9hZGluZyA9IHRoaXMuX3BvcHVwQnV0dG9uLnRleHRDb250ZW50O1xyXG5cclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKClcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9pbnB1dC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzO1xyXG4gICAgfVxyXG4gICAgc2V0SW5wdXRzVmFsdWVzKGRhdGFVc2VyKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXQuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBkYXRhVXNlcltpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25TdWJtaXQgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSBgJHt0aGlzLl9wb3B1cEJ1dHRvbi50ZXh0Q29udGVudH0uLi5gO1xyXG4gICAgICAgIHRoaXMuZm9ybVN1Ym1pdEFkZCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fb25TdWJtaXQpXHJcbiAgICB9XHJcblxyXG4gICAgc2V0QnV0dG9uVGV4dCh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9wb3B1cEJ1dHRvbkxvYWRpbmdcclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9ICh7XHJcbiAgICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2l0ZW0nLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmVkLWJ1dHRvbicsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVkLWJ1dHRvbl9kaXNhYmxlZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pdGVtLWVycm9yJyxcclxuICAgIGVycm9yQ2xhc3M6ICdlcnJvcl9vcGVuZWQnXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtU2VsZWN0b3IgPSBmb3JtLFxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3IsXHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yLFxyXG4gICAgICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MsXHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MsXHJcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcyxcclxuXHJcbiAgICAgICAgICAgIC8vdGhpcy5fZm9ybSA9IEFycmF5LmZyb20odGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSlcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLl9mb3JtKVxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpXHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuICAgIH1cclxuXHJcbiAgICAvLyDQutC90L7Qv9C60LAg0LDQutGC0LjQslxyXG4gICAgX2VuYWJsZUJ1dHRvbihidXR0b24pIHtcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgICAgIGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKVxyXG4gICAgfVxyXG4gICAgLy8g0LrQvdC+0L/QutCwINC90LXQsNC60YLQuNCyXHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbikge1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXHJcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpXHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8gINC/0L7Qu9GPIGMg0L7RiNC40LHQutC+0LlcclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZVxyXG4gICAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAgLy8g0KTRg9C90LrRhtC40Y8gINC/0L7Qu9GPINCx0LXQtyDQvtGI0LjQsdC60LhcclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBcIlwiXHJcbiAgICAgICAgZm9ybUVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoZm9ybUlucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1JbnB1dC5zb21lKGl0ZW0gPT4gIWl0ZW0udmFsaWRpdHkudmFsaWQpXHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgICAgIGlmIChpbnB1dC5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gLy/RhNGD0L3QutGG0LjRjyDRgdC70YPRiNCw0YLQtdC70LXQuVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbilcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dClcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbilcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH07XHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpe1xyXG4gICAgXHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgKHRoaXMuX2VuYWJsZUJ1dHRvbigodGhpcy5fc3VibWl0QnV0dG9uKSkpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpOyBcclxuICBcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIH1cclxuICAgIC8vICAgLy/RhNGD0L3QutGG0LjRjyDQt9Cw0L/Rg9GB0LrQsCDQstGL0LvQuNC00LDRhtC40LhcclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQodCw0YXQsNC70LjQvScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzY1NTM1LzUxNjY0MzEzNzA1XzU3MTM3OTEyNTdfay5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHRpdGxlOiAn0JTQsNCz0LXRgdGC0LDQvScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzE5NTgvNDQzNjg5NzgzMDRfMjczMmI1ODMyNV9rLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcclxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9saXZlLnN0YXRpY2ZsaWNrci5jb20vNjU1MzUvNDg4MjAxMDA1MzJfODdhMWNlYjEwZF9rLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdGl0bGU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aXRsZTogJ9CR0LDQudC60LDQuycsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzY1NTM1LzUxNDIxMjA1NDM0Xzg5MTNmNGExYTVfay5qcGcnXHJcbiAgICB9XHJcbl07XHJcblxyXG4vLyDQndCw0YXQvtC00LjQvCBwb3B1cFxyXG5jb25zdCBwb3B1cEVkaXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XHJcbmNvbnN0IHBvcHVwQWRkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hZGRcIik7XHJcbmNvbnN0IHBvcHVwT3BlbkltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxuY29uc3QgcG9wdXBDbG9zZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9jb25maXJtJylcclxuY29uc3QgcG9wdXBBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYXZhdGFyJylcclxuXHJcbi8vINCd0LDRhdC+0LTQuNC8INC60L3QvtC/0LrQuFxyXG5jb25zdCBwcm9maWxlQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50ID0gcHJvZmlsZUJ1dHRvbkVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnQgPSBwcm9maWxlQnV0dG9uRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG5cclxuXHJcbi8vINCd0LDRhdC+0LTQuNC8INC/0L7Qu9GPINGE0L7RgNC80Ysg0LIgRE9NXHJcbmNvbnN0IGZvcm1FbGVtZW50RWRpdCA9IHBvcHVwRWRpdEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5jb25zdCBmb3JtRWxlbWVudEFkZCA9IHBvcHVwQWRkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbmNvbnN0IGZvcm1FbGVtZW50QXZhdGFyID0gcG9wdXBBdmF0YXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuXHJcbmV4cG9ydCB7IHBvcHVwRWRpdEVsZW1lbnQsIHBvcHVwQWRkRWxlbWVudCwgcG9wdXBPcGVuSW1hZ2VFbGVtZW50LCBwb3B1cENsb3NlRWxlbWVudCwgcG9wdXBBdmF0YXJFbGVtZW50LCBwcm9maWxlQnV0dG9uRWxlbWVudCwgcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50LCBwcm9maWxlQWRkQnV0dG9uRWxlbWVudCwgZm9ybUVsZW1lbnRFZGl0LCBmb3JtRWxlbWVudEFkZCwgZm9ybUVsZW1lbnRBdmF0YXIgfSIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIlxyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnXHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJ1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnXHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJ1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJ1xyXG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzJ1xyXG5cclxuaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcydcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcydcclxuLy9pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcbi8vaW5pdGlhbENhcmRzLnJldmVyc2UoKTtcclxuaW1wb3J0ICcuL2luZGV4LmNzcydcclxuXHJcbmltcG9ydCB7IHBvcHVwRWRpdEVsZW1lbnQsIHBvcHVwQWRkRWxlbWVudCwgcG9wdXBPcGVuSW1hZ2VFbGVtZW50LCBwb3B1cENsb3NlRWxlbWVudCwgcG9wdXBBdmF0YXJFbGVtZW50LCBwcm9maWxlQnV0dG9uRWxlbWVudCwgcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50LCBwcm9maWxlQWRkQnV0dG9uRWxlbWVudCwgZm9ybUVsZW1lbnRFZGl0LCBmb3JtRWxlbWVudEFkZCwgZm9ybUVsZW1lbnRBdmF0YXIgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v0J/QvtC00LrRjtGHLiDQuiDRgdC10YDQstC10YDRgy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02NicsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzI2Nzg2YmUzLWZlZDktNGQ4My05YWUyLTEzNDhlZWUxYjdkNScsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59KTtcclxuLy8gICBjb25zb2xlLmxvZyhhcGkpXHJcbi8vICAgYXBpLmdldENhcmQoKVxyXG4vLyAgICAgLnRoZW4ocmVzID0+IGNvbnNvbGUubG9nKHJlcykpXHJcblxyXG4vLyAgIGFwaS5nZXRJbmZvKClcclxuLy8gICAgIC50aGVuKHJlcyA9PiBjb25zb2xlLmxvZyhyZXMpKVxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/Qn9C+0L/QsNC/INC+0YLQutGA0YvRgtC40Y8g0LrQsNGA0YLQvtGH0LXQui8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmNvbnN0IHBvcHVwT3BlbkltYWdlRWxlbWVudFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9pbWFnZVwiXHJcblxyXG5jb25zdCBwb3B1cE9wZW5JbWFnZVNlY3Rpb24gPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBPcGVuSW1hZ2VFbGVtZW50U2VsZWN0b3IpXHJcbnBvcHVwT3BlbkltYWdlU2VjdGlvbi5zZXRFdmVudExpc3RlbmVycygpXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG4vL9Cf0L7Qv9Cw0L8gRURJVFxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fdGl0bGUnLFxyXG4gICAgam9iU2VsZWN0b3I6ICcucHJvZmlsZV9fc3VidGl0bGUnLFxyXG4gICAgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fYXZhdGFyJ1xyXG59XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKGNvbmZpZyk7XHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/Qn9C+0L/QsNC/IEVESVQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmNvbnN0IHBvcHVwRWRpdEVsZW1lbnRTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfZWRpdFwiXHJcbmNvbnN0IGVkaXRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFZGl0RWxlbWVudFNlbGVjdG9yLCBmb3JtU3VibWl0RWRpdClcclxuXHJcbmZ1bmN0aW9uIGZvcm1TdWJtaXRFZGl0KGRhdGEpIHtcclxuICAgIGFwaS5zZXRVc2VySW5mbyhkYXRhKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJJbmZvLnNlclVzZXJJbmZvKHsgYXZhdGFyOiByZXMuYXZhdGFyLCBmaXJzdG5hbWU6IHJlcy5uYW1lLCBkZXNjcmlwdGlvbjogcmVzLmFib3V0IH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQuCAke2Vycm9yfWApKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiBlZGl0UG9wdXBXaXRoRm9ybS5zZXRCdXR0b25UZXh0KCkpXHJcblxyXG4gICAgZWRpdFBvcHVwV2l0aEZvcm0uY2xvc2UoKVxyXG59XHJcbmVkaXRQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKClcclxuLy8v0JjQutC+0L3QutCwIEVESVQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByb2ZpbGVFZGl0QnV0dG9uRWxlbWVudEZ1bmN0aW9uKTtcclxuZnVuY3Rpb24gcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbiAgICBlZGl0UG9wdXBXaXRoRm9ybS5zZXRJbnB1dHNWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSlcclxuICAgIGNvbnNvbGUubG9nKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gICAgZWRpdFBvcHVwV2l0aEZvcm0ub3BlbigpXHJcbn1cclxuLy8gZnVuY3Rpb24gcHJvZmlsZUVkaXRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbi8vICAgICBlZGl0UG9wdXBXaXRoRm9ybS5vcGVuKClcclxuLy8gICAgIGNvbnN0IHByb2ZpbGVEYXRhICA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkgLy8g0JLQvtGCINGC0YPRgiDQsiDQv9C10YDQtdC80LXQvdC90YPRjiBwcm9maWxlRGF0YSDQv9C+0LvQvtC20LjQu9C4INC+0LHRitC10LrRgiwg0YLQvtGCINGH0YLQviDRgtGLINC60L7QvdGB0L7Qu9GM0LvQvtCz0LjRgNGD0LXRiNGMINC90LAg0YHQutGA0LjQvdGI0L7RgtC1IFxyXG4vLyAgIGNvbnNvbGUubG9nKHByb2ZpbGVEYXRhKTtcclxuLy8gICAgIG5hbWVFZGl0SW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5maXJzdG5hbWVcclxuLy8gICAgIGpvYkVkaXRJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLmRlc2NyaXB0aW9uXHJcbi8vICAgfVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL9Cf0L7Qv9Cw0L8gQUQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmNvbnN0IHBvcHVwQWRkRWxlbWVudFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9hZGRcIlxyXG5jb25zdCBhZGR0UG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQWRkRWxlbWVudFNlbGVjdG9yLCBmb3JtU3VibWl0QWRkKVxyXG5cclxuZnVuY3Rpb24gZm9ybVN1Ym1pdEFkZChkYXRhKSB7XHJcbiAgICBjb25zb2xlLmxvZygnb3BlbicpO1xyXG4gICAgUHJvbWlzZS5hbGwoW2FwaS5nZXRJbmZvKCksIGFwaS5hZGRDYXJkKGRhdGEpXSlcclxuICAgICAgICAudGhlbigoW2RhdGFVc2VyLCBkYXRhQ2FyZF0pID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YUNhcmQpO1xyXG4gICAgICAgICAgICBkYXRhQ2FyZC5teWlkID0gZGF0YVVzZXIuX2lkXHJcbiAgICAgICAgICAgIGNhcmRzTGlzdFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGRhdGFDYXJkKSk7XHJcbiAgICAgICAgICAgIGFkZHRQb3B1cFdpdGhGb3JtLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YHQvtC30LTQsNC90LjQuCDQutCw0YDRgtC+0YfQutC4ICR7ZXJyb3J9YCkpKVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IGFkZHRQb3B1cFdpdGhGb3JtLnNldEJ1dHRvblRleHQoKSlcclxufTtcclxuYWRkdFBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuXHJcbi8vL9CY0LrQvtC90LrQsCBBREQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnByb2ZpbGVBZGRCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJvZmlsZUFkZEJ1dHRvbkVsZW1lbnRGdW5jdGlvbik7XHJcbmZ1bmN0aW9uIHByb2ZpbGVBZGRCdXR0b25FbGVtZW50RnVuY3Rpb24oKSB7XHJcbiAgICBhZGR0UG9wdXBXaXRoRm9ybS5vcGVuKClcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/Qn9C+0L/QsNC/IEFWQVRBUi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCBwb3B1cEF2YXRhckVsZW1lbnRTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfYXZhdGFyXCJcclxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEF2YXRhckVsZW1lbnRTZWxlY3RvciwgZm9ybVN1Ym1pdEF2YXRhcilcclxuXHJcbmZ1bmN0aW9uIGZvcm1TdWJtaXRBdmF0YXIoZGF0YSkge1xyXG4gICAgYXBpLnNldFVzZXJBdmF0YXIoZGF0YSlcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICB1c2VySW5mby5zZXJVc2VySW5mbyh7IGF2YXRhcjogcmVzLmF2YXRhciwgZmlyc3RuYW1lOiByZXMubmFtZSwgZGVzY3JpcHRpb246IHJlcy5hYm91dCB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvciA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Lgg0LDQstCw0YLQsNGA0LAgJHtlcnJvcn1gKSkpXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gYXZhdGFyUG9wdXAuc2V0QnV0dG9uVGV4dCgpIClcclxuICAgXHJcbiAgICBhdmF0YXJQb3B1cC5jbG9zZSgpXHJcbiAgICBjb25zb2xlLmxvZygnQ2xvc2UnKTtcclxufTtcclxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1idXR0b24nKVxyXG5jb25zb2xlLmxvZyhhdmF0YXJCdXR0b24pO1xyXG4vLy/QmNC60L7QvdC60LAgQ0xPU0UvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZvcm0pXHJcbmZ1bmN0aW9uIGZvcm0oKSB7XHJcbiAgICBhdmF0YXJQb3B1cC5vcGVuKClcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL9Cf0L7Qv9Cw0L8gQ09ORklSTS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCBwb3B1cENvbmZpcm1FbGVtZW50U2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2NvbmZpcm1cIlxyXG5jb25zdCBCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmVkLWJ1dHRvbl9jb25maXJtcycpXHJcbmNvbnN0IGRlZmF1bHRCID0gJ9CU0LAuLi4nXHJcbmNvbnN0IHBvcHVwRGVsZXRlID0gbmV3IFBvcHVwV2l0aERlbGV0ZShwb3B1cENvbmZpcm1FbGVtZW50U2VsZWN0b3IsIGZvcm1TdWJtaXRDb25maXJtKVxyXG5mdW5jdGlvbiBmb3JtU3VibWl0Q29uZmlybSh7IGNhcmQsIGNhcmRJZH0pIHtcclxuICAgIGNvbnNvbGUubG9nKCd4Jyk7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgY2FyZElkLmRlbGV0ZUJ1dHRvbkNhcmQoKVxyXG4gICAgICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpXHJcbiAgICAgICAgfSkgXHJcbiAgICAgICAgLmNhdGNoKChlcnJvciA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INGD0LTQsNC70LXQvdC40Lgg0LrQsNGA0YLQvtGH0LrQuCAke2Vycm9yfWApKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiBwb3B1cERlbGV0ZS5zZXRCdXR0b25UZXh0KCkgKVxyXG4gICBcclxufVxyXG5wb3B1cERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/RgNC10LDQu9C40LfQsNGG0LjRjyDQutC70LDRgdGB0LAgU2VjdGlvbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gICAgY29uc3QgY2FyZHMgPSBuZXcgQ2FyZChpdGVtLCBwb3B1cE9wZW5JbWFnZVNlY3Rpb25cclxuICAgICAgICAub3BlbiwgJy5lbGVtZW50cy10ZW1wbGF0ZScsIHBvcHVwRGVsZXRlLm9wZW4sIChsaWtlRWxlbWVudCwgY2FyZElkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsaWtlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICBhcGkuZGVsZXRlTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZHMudG9nZ2xlTGlrZShyZXMubGlrZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YPQtNCw0LvQtdC90LjQuCDQu9Cw0LnQutCwICR7ZXJyb3J9YCkpKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBpLmFkZExpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRzLnRvZ2dsZUxpa2UocmVzLmxpa2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvciA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INC/0L7RgdGC0LDQstC6INC70LDQudC60LAgJHtlcnJvcn1gKSkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZHMuZ2VuZXJhdGVDYXJkKClcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gJy5lbGVtZW50c19fbGlzdC10ZW1wbGF0ZSc7XHJcbmNvbnN0IGNhcmRzTGlzdFNlY3Rpb24gPSBuZXcgU2VjdGlvbigoaXRlbSkgPT4ge1xyXG4gICAgY2FyZHNMaXN0U2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xyXG59LFxyXG4gICAgY2FyZExpc3RTZWxlY3RvclxyXG4pO1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/QktCQ0JvQmNCU0JDQptCY0K8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuY29uc3QgZm9ybUVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudEVkaXQpXHJcbmNvbnN0IGZvcm1BZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudEFkZClcclxuY29uc3QgZm9ybUF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50QXZhdGFyKVxyXG5cclxuLy8gIC8vXCLQktC60LvRjtGH0LDQtdC8XCIg0L/QvtC00L/QuNGB0LrQuCDQvdCwINC40LfQvNC10L3QtdC90LjRjyDQsiDQuNC90L/Rg9GC0LDRhVxyXG5mb3JtRWRpdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcclxuZm9ybUFkZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcclxuZm9ybUF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL9Ce0YHQvdC+0LLQsCBBUEkvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5mbygpLCBhcGkuZ2V0Q2FyZCgpXSlcclxuICAgIC50aGVuKChbZGF0YVVzZXIsIGRhdGFDYXJkXSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGFDYXJkKTtcclxuICAgICAgICBkYXRhQ2FyZC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm15aWQgPSBkYXRhVXNlci5faWRcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhVXNlcik7XHJcbiAgICAgICAgdXNlckluZm8uc2VyVXNlckluZm8oeyBhdmF0YXI6IGRhdGFVc2VyLmF2YXRhciwgZmlyc3RuYW1lOiBkYXRhVXNlci5uYW1lLCBkZXNjcmlwdGlvbjogZGF0YVVzZXIuYWJvdXQgfSlcclxuICAgICAgICBjYXJkc0xpc3RTZWN0aW9uLnJlbmRlckl0ZW1zKGRhdGFDYXJkKVxyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0L3QsNGH0LDQu9GM0L3Ri9GFINC00LDQvdC90YvQuSDRgdGC0YDQsNC90LjRhtGLICR7ZXJyb3J9YCkpXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8vIGFwaS5nZXRJbmZvKGRhdGEpXHJcbi8vICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24pXHJcbi8vICAgICAudGhlbihyZXMgPT4gY29uc29sZS5sb2cocmVzKSkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX3VybCA9IG9wdGlvbnMuYmFzZVVybFxyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVyc1xyXG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uXHJcbiAgfVxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0KfRgtC+LdGC0L4g0L/QvtGI0LvQviDQvdC1INGC0LDQujogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfVxyXG4gIGdldENhcmQoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH1cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5maXJzdG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH1cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH1cclxuICBhZGRDYXJkKGRhdGEpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS50aXRsZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9XHJcbiAgYWRkTGlrZShjYXJkSWQpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH1cclxuICBkZWxldGVMaWtlKGNhcmRJZCl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfVxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuXHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fdGV4dCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RleHRcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuID0gKG5hbWUsIGxpbmspID0+IHtcclxuICAgIHRoaXMuX3RleHQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZVxyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHN1cGVyLm9wZW4oKVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLm5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmpvYlNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5hdmF0YXJTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdG5hbWU6ICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlVGV4dC50ZXh0Q29udGVudFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBzZXJVc2VySW5mbyh7YXZhdGFyLCBmaXJzdG5hbWUsIGRlc2NyaXB0aW9ufSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBhdmF0YXJcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZmlyc3RuYW1lXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlVGV4dC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgfVxyXG4vLyBleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbi8vICAgICBjb25zdHJ1Y3RvcihuYW1lLCB0ZXh0KSB7XHJcbi8vICAgICAgICAgdGhpcy5faW5wdXROYW1lID0gbmFtZVxyXG4vLyAgICAgICAgIHRoaXMuX2lucHV0VGV4dCA9IHRleHRcclxuLy8gICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xyXG4vLyAgICAgICAgIHRoaXMuX3Byb2ZpbGVUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJyk7XHJcbi8vICAgICB9XHJcbiAgIFxyXG4vLyAgICAgZ2V0VXNlckluZm8oKSB7XHJcbi8vICAgICAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgICBuYW1lOiB0aGlzLl9pbnB1dE5hbWUudmFsdWUgPSB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuLy8gICAgICAgICB0ZXh0OiB0aGlzLl9pbnB1dFRleHQudmFsdWUgPSB0aGlzLl9wcm9maWxlVGV4dC50ZXh0Q29udGVudFxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICAgIC8vIHNlclVzZXJJbmZvKG5hbWUsIHRleHQpIHtcclxuLy8gICAgIC8vICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWVcclxuLy8gICAgIC8vICAgICB0aGlzLl9wcm9maWxlVGV4dC50ZXh0Q29udGVudCA9IHRleHRcclxuLy8gICAgIC8vICB9XHJcbi8vICAgICBzZXRVc2VySW5mbygpIHtcclxuXHJcbi8vICAgICAgICAgdGhpcy5faW5wdXROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fcHJvZmlsZU5hbWUudmFsdWUsXHJcbi8vICAgICAgICAgdGhpcy5faW5wdXRUZXh0LnRleHRDb250ZW50ID0gdGhpcy5fcHJvZmlsZVRleHQudmFsdWVcclxuXHJcbi8vICAgICB9XHJcbi8vIH0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5mb3JtU3VibWl0ID0gZm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLnBvcHVwQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlZC1idXR0b24nKTtcclxuICAgICAgICB0aGlzLnBvcHVwQnV0dG9uTG9hZGluZyA9IHRoaXMucG9wdXBCdXR0b24udGV4dENvbnRlbnQ7XHJcblxyXG4gICAgfVxyXG4gICAgX3N1Ym1pdCA9IChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gYCR7dGhpcy5wb3B1cEJ1dHRvbi50ZXh0Q29udGVudH0uLi5gO1xyXG4gICAgICAgIHRoaXMuZm9ybVN1Ym1pdCgoeyBjYXJkOiB0aGlzLl9lbGVtZW50LCBjYXJkSUQ6IHRoaXMuX2NhcmRJRCB9KSk7XHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgdGhpcy5wb3B1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX3N1Ym1pdClcclxuICAgIH1cclxuICAgIHNldEJ1dHRvblRleHQodGV4dCkge1xyXG4gICAgICAgIHRoaXMucG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSAgdGhpcy5wb3B1cEJ1dHRvbkxvYWRpbmdcclxuICAgIH1cclxuXHJcbiAgICBvcGVuID0gKGNhcmQsIGNhcmRJZCApID0+IHtcclxuICAgICAgICBzdXBlci5vcGVuKClcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gY2FyZDtcclxuICAgICAgICB0aGlzLl9jYXJkSUQgPSBjYXJkSWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiAgICAvLyBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgLy8gICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgIC8vICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgICAgIHRoaXMuZm9ybVN1Ym1pdCgoeyBjYXJkOiB0aGlzLl9lbGVtZW50LCBjYXJkSUQ6IHRoaXMuX2NhcmRJRCB9KSk7XHJcbiAgICAvLyAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgLy8gICAgIH0pXHJcbiAgICAvLyB9XHJcbiIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgLy8gIHRoaXMuX2luaXRpYWxBcnJheSA9IGRhdGE7XHJcbiAgICAgICAvLyB0aGlzLl9pdGVtcz0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpOyBcclxuICAgIH1cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgLy90aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpXHJcbiAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxyXG4gICAgfVxyXG4gICAgcmVuZGVySXRlbXMoZGF0YSkge1xyXG4gICAgLy9yZW5kZXJlcigpIHtcclxuICAgICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIoaXRlbSlcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwib3BlbkNvbmZpcm0iLCJwdXRMaWtlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9teWlkIiwibXlpZCIsIl9jYXJkSWQiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9saWtlc0xlbmd0aCIsImxlbmd0aCIsIl9wdXRMaWtlIiwiX293bmVySWQiLCJvd25lciIsIl9vcGVuQ29uZmlybSIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl92aXNpYmxlRGVsZXRlQnV0dG9uIiwiX2RldGV0ZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsIl9jb3VudExpa2UiLCJmb3JFYWNoIiwiZWxlbWVudCIsIl9jb3VudGVyIiwidGV4dENvbnRlbnQiLCJfYnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2VuZXJhdGVDYXJkIiwiX2VsZW1lbnQiLCJfaW1hZ2UiLCJfdGV4dCIsImFsdCIsInNyYyIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQ2FyZCIsInRvZ2dsZUxpa2UiLCJ0b2dnbGUiLCJfZGVsZXRlQnV0dG9uQ2FyZCIsInJlbW92ZSIsIm9wZW5JbWciLCJfaGFuZGxlT3BlbkRlbGV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRBZGQiLCJzdXBlciIsIl9mb3JtIiwiX2lucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsImNvbnNvbGUiLCJsb2ciLCJfcG9wdXBCdXR0b24iLCJfcG9wdXBCdXR0b25Mb2FkaW5nIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRzVmFsdWVzIiwiZGF0YVVzZXIiLCJfb25TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsInNldEJ1dHRvblRleHQiLCJ0ZXh0IiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsIl9zdWJtaXRCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiYnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiZGlzYWJsZUJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsIl9zaG93SW5wdXRFcnJvciIsImZvcm1FcnJvciIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZm9ybUlucHV0Iiwic29tZSIsIml0ZW0iLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImNoZWNrVmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cEVkaXRFbGVtZW50IiwicG9wdXBBZGRFbGVtZW50IiwicG9wdXBBdmF0YXJFbGVtZW50IiwicHJvZmlsZUJ1dHRvbkVsZW1lbnQiLCJwcm9maWxlRWRpdEJ1dHRvbkVsZW1lbnQiLCJwcm9maWxlQWRkQnV0dG9uRWxlbWVudCIsImZvcm1FbGVtZW50RWRpdCIsImZvcm1FbGVtZW50QWRkIiwiZm9ybUVsZW1lbnRBdmF0YXIiLCJhcGkiLCJvcHRpb25zIiwiX3VybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbmZvIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0Q2FyZCIsInNldFVzZXJJbmZvIiwiZGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RuYW1lIiwiYWJvdXQiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJhZGRDYXJkIiwidGl0bGUiLCJhZGRMaWtlIiwiY2FyZElkIiwiZGVsZXRlTGlrZSIsImRlbGV0ZUNhcmQiLCJwb3B1cE9wZW5JbWFnZVNlY3Rpb24iLCJ1c2VySW5mbyIsIl9wcm9maWxlTmFtZSIsIm5hbWVTZWxlY3RvciIsIl9wcm9maWxlVGV4dCIsImpvYlNlbGVjdG9yIiwiX3Byb2ZpbGVBdmF0YXIiLCJhdmF0YXJTZWxlY3RvciIsImdldFVzZXJJbmZvIiwic2VyVXNlckluZm8iLCJlZGl0UG9wdXBXaXRoRm9ybSIsImNhdGNoIiwiZXJyb3IiLCJmaW5hbGx5IiwiYWRkdFBvcHVwV2l0aEZvcm0iLCJhbGwiLCJkYXRhQ2FyZCIsImNhcmRzTGlzdFNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsImF2YXRhclBvcHVwIiwiYXZhdGFyQnV0dG9uIiwicG9wdXBEZWxldGUiLCJmb3JtU3VibWl0IiwicG9wdXBCdXR0b24iLCJwb3B1cEJ1dHRvbkxvYWRpbmciLCJfc3VibWl0IiwiY2FyZCIsImNhcmRJRCIsIl9jYXJkSUQiLCJkZWxldGVCdXR0b25DYXJkIiwiY2FyZHMiLCJsaWtlRWxlbWVudCIsImNvbnRhaW5zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9jb250YWluZXIiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJmb3JtRWRpdFZhbGlkYXRvciIsImZvcm1BZGRWYWxpZGF0b3IiLCJmb3JtQXZhdGFyVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==